var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||typeof Object.defineProperties=='function'?Object.defineProperty:function(b,c,a){a=a;if(b==Array.prototype||b==Object.prototype){return}b[c]=a.value};$jscomp.getGlobal=function(a){return typeof window!='undefined'&&window===a?a:typeof global!='undefined'&&global!=null?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(i,f,j,k){if(!f){return}var a=$jscomp.global;var b=i.split('.');for(var e=0;e<b.length-1;e++){var d=b[e];if(!(d in a)){a[d]={}}a=a[d]}var g=b[b.length-1];var h=a[g];var c=f(h);if(c==h||c==null){return}$jscomp.defineProperty(a,g,{configurable:!0,writable:!0,value:c})};$jscomp.polyfill('Array.prototype.copyWithin',function(a){if(a){return a}var b=function(d,c,b){var e=this.length;d=Number(d);c=Number(c);b=Number(b!=null?b:e);if(d<c){b=Math.min(b,e);while(c<b){if(c in this){this[d++]=this[c++]}else {delete this[d++];c++}}}else {b=Math.min(b,e+c-d);d+=b-c;while(b>c){if(--b in this){this[--d]=this[b]}else {delete this[d]}}}return this};return b},'es6','es3');$jscomp.SYMBOL_PREFIX='jscomp_symbol_';$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};if(!$jscomp.global['Symbol']){$jscomp.global['Symbol']=$jscomp.Symbol}};$jscomp.Symbol=function(){var a=0;function Symbol(b){return $jscomp.SYMBOL_PREFIX+(b||'')+a++}return Symbol}();$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global['Symbol'].iterator;if(!a){a=$jscomp.global['Symbol'].iterator=$jscomp.global['Symbol']('iterator')}if(typeof Array.prototype[a]!='function'){$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}})}$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var b=0;return $jscomp.iteratorPrototype(function(){if(b<a.length){return {done:!1,value:a[b++]}}else {return {done:!0}}})};$jscomp.iteratorPrototype=function(b){$jscomp.initSymbolIterator();var a={next:b};a[$jscomp.global['Symbol'].iterator]=function(){return this};return a};$jscomp.iteratorFromArray=function(a,d){$jscomp.initSymbolIterator();if(a instanceof String){a=a+''}var c=0;var b={next:function(){if(c<a.length){var e=c++;return {value:d(e,a[e]),done:!1}}b.next=function(){return {done:!0,value:void 0}};return b.next()}};b[Symbol.iterator]=function(){return b};return b};$jscomp.polyfill('Array.prototype.entries',function(a){if(a){return a}var b=function(){return $jscomp.iteratorFromArray(this,function(b,c){return [b,c]})};return b},'es6','es3');$jscomp.polyfill('Array.prototype.fill',function(a){if(a){return a}var b=function(f,c,b){var d=this.length||0;if(c<0){c=Math.max(0,d+c)}if(b==null||b>d){b=d}b=Number(b);if(b<0){b=Math.max(0,d+b)}for(var e=Number(c||0);e<b;e++){this[e]=f}return this};return b},'es6','es3');$jscomp.findInternal=function(a,d,e){if(a instanceof String){a=String(a)}var f=a.length;for(var b=0;b<f;b++){var c=a[b];if(d.call(e,c,b,a)){return {i:b,v:c}}}return {i:-1,v:void 0}};$jscomp.polyfill('Array.prototype.find',function(a){if(a){return a}var b=function(c,b){return $jscomp.findInternal(this,c,b).v};return b},'es6','es3');$jscomp.polyfill('Array.prototype.findIndex',function(a){if(a){return a}var b=function(c,b){return $jscomp.findInternal(this,c,b).i};return b},'es6','es3');$jscomp.polyfill('Array.from',function(a){if(a){return a}var b=function(b,c,g){$jscomp.initSymbolIterator();c=c!=null?c:function(d){return d};var d=[];var f=b[Symbol.iterator];if(typeof f=='function'){b=f.call(b);var h;while(!(h=b.next()).done){d.push(c.call(g,h.value))}}else {var i=b.length;for(var e=0;e<i;e++){d.push(c.call(g,b[e]))}}return d};return b},'es6','es3');$jscomp.polyfill('Object.is',function(a){if(a){return a}var b=function(b,c){if(b===c){return b!==0||1/b===1/c}else {return b!==b&&c!==c}};return b},'es6','es3');$jscomp.polyfill('Array.prototype.includes',function(a){if(a){return a}var b=function(d,e){var b=this;if(b instanceof String){b=String(b)}var f=b.length;for(var c=e||0;c<f;c++){if(b[c]==d||Object.is(b[c],d)){return !0}}return !1};return b},'es7','es3');$jscomp.polyfill('Array.prototype.keys',function(a){if(a){return a}var b=function(){return $jscomp.iteratorFromArray(this,function(b){return b})};return b},'es6','es3');$jscomp.polyfill('Array.of',function(a){if(a){return a}var b=function(b){return Array.from(arguments)};return b},'es6','es3');$jscomp.polyfill('Array.prototype.values',function(a){if(a){return a}var b=function(){return $jscomp.iteratorFromArray(this,function(c,b){return b})};return b},'es6','es3');$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();var b=a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.polyfill('Promise',function(c){if(c&&!$jscomp.FORCE_POLYFILL_PROMISE){return c}function AsyncExecutor(){this.batch_=null}AsyncExecutor.prototype.asyncExecute=function(a){if(this.batch_==null){this.batch_=[];this.asyncExecuteBatch_()}this.batch_.push(a);return this};AsyncExecutor.prototype.asyncExecuteBatch_=function(){var a=this;this.asyncExecuteFunction(function(){a.executeBatch_()})};var e=$jscomp.global['setTimeout'];AsyncExecutor.prototype.asyncExecuteFunction=function(a){e(a,0)};AsyncExecutor.prototype.executeBatch_=function(){while(this.batch_&&this.batch_.length){var b=this.batch_;this.batch_=[];for(var a=0;a<b.length;++a){var d=b[a];delete b[a];try{d()}catch(f){this.asyncThrow_(f)}}}this.batch_=null};AsyncExecutor.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a})};var b={PENDING:0,FULFILLED:1,REJECTED:2};var a=function(d){this.state_=b.PENDING;this.result_=undefined;this.onSettledCallbacks_=[];var a=this.createResolveAndReject_();try{d(a.resolve,a.reject)}catch(f){a.reject(f)}};a.prototype.createResolveAndReject_=function(){var b=this;var a=!1;function firstCallWins(d){return function(e){if(!a){a=!0;d.call(b,e)}}}return {resolve:firstCallWins(this.resolveTo_),reject:firstCallWins(this.reject_)}};a.prototype.resolveTo_=function(b){if(b===this){this.reject_(new TypeError('A Promise cannot resolve to itself'))}else {if(b instanceof a){this.settleSameAsPromise_(b)}else {if(isObject(b)){this.resolveToNonPromiseObj_(b)}else {this.fulfill_(b)}}}};a.prototype.resolveToNonPromiseObj_=function(b){var a=undefined;try{a=b.then}catch(f){this.reject_(f);return}if(typeof a=='function'){this.settleSameAsThenable_(a,b)}else {this.fulfill_(b)}};function isObject(a){switch(typeof a){case 'object':return a!=null;case 'function':return !0;default:return !1;}}a.prototype.reject_=function(a){this.settle_(b.REJECTED,a)};a.prototype.fulfill_=function(a){this.settle_(b.FULFILLED,a)};a.prototype.settle_=function(d,a){if(this.state_!=b.PENDING){throw new Error('Cannot settle('+d+', '+a|'): Promise already settled in state'+this.state_)}this.state_=d;this.result_=a;this.executeOnSettledCallbacks_()};a.prototype.executeOnSettledCallbacks_=function(){if(this.onSettledCallbacks_!=null){var b=this.onSettledCallbacks_;for(var a=0;a<b.length;++a){b[a].call();b[a]=null}this.onSettledCallbacks_=null}};var d=new AsyncExecutor();a.prototype.settleSameAsPromise_=function(b){var a=this.createResolveAndReject_();b.callWhenSettled_(a.resolve,a.reject)};a.prototype.settleSameAsThenable_=function(b,d){var a=this.createResolveAndReject_();try{b.call(d,a.resolve,a.reject)}catch(f){a.reject(f)}};a.prototype.then=function(f,g){var b;var d;var e=new a(function(a,e){b=a;d=e});function createCallback(a,e){if(typeof a=='function'){return function(h){try{b(a(h))}catch(i){d(i)}}}else {return e}}this.callWhenSettled_(createCallback(f,b),createCallback(g,d));return e};a.prototype['catch']=function(a){return this.then(undefined,a)};a.prototype.callWhenSettled_=function(e,f){var a=this;function callback(){switch(a.state_){case b.FULFILLED:e(a.result_);break;case b.REJECTED:f(a.result_);break;default:throw new Error('Unexpected state: '+a.state_);}}if(this.onSettledCallbacks_==null){d.asyncExecute(callback)}else {this.onSettledCallbacks_.push(function(){d.asyncExecute(callback)})}};function resolvingPromise(b){if(b instanceof a){return b}else {return new a(function(a,d){a(b)})}}a['resolve']=resolvingPromise;a['reject']=function(b){return new a(function(d,a){a(b)})};a['race']=function(b){return new a(function(e,f){var d=$jscomp.makeIterator(b);for(var a=d.next();!a.done;a=d.next()){resolvingPromise(a.value).callWhenSettled_(e,f)}})};a['all']=function(e){var d=$jscomp.makeIterator(e);var b=d.next();if(b.done){return resolvingPromise([])}else {return new a(function(g,h){var a=[];var f=0;function onFulfilled(b){return function(d){a[b]=d;f--;if(f==0){g(a)}}}do{a.push(undefined);f++;resolvingPromise(b.value).callWhenSettled_(onFulfilled(a.length-1),h);b=d.next()}while(!b.done)})}};return a},'es6','es3');$jscomp.executeAsyncGenerator=function(a){function passValueToGenerator(b){return a.next(b)}function passErrorToGenerator(b){return a['throw'](b)}return new Promise(function(b,c){function handleGeneratorRecord(d){if(d.done){b(d.value)}else {Promise.resolve(d.value).then(passValueToGenerator,passErrorToGenerator).then(handleGeneratorRecord,c)}}handleGeneratorRecord(a.next())})};$jscomp.owns=function(b,a){return Object.prototype.hasOwnProperty.call(b,a)};$jscomp.polyfill('WeakMap',function(c){function isConformant(){if(!c||!Object.seal){return !1}try{var b=Object.seal({});var d=Object.seal({});var a=new c([[b,2],[d,3]]);if(a.get(b)!=2||a.get(d)!=3){return !1}a['delete'](b);a.set(d,4);return !a.has(b)&&a.get(d)==4}catch(e){return !1}}if(isConformant()){return c}var a='$jscomp_hidden_'+Math.random().toString().substring(2);function insert(b){if(!$jscomp.owns(b,a)){var d={};$jscomp.defineProperty(b,a,{value:d})}}function patch(a){var b=Object[a];if(b){Object[a]=function(d){insert(d);return b(d)}}}patch('freeze');patch('preventExtensions');patch('seal');var d=0;var b=function(a){this.id_=(d+=Math.random()+1).toString();if(a){$jscomp.initSymbol();$jscomp.initSymbolIterator();var f=$jscomp.makeIterator(a);var b;while(!(b=f.next()).done){var e=b.value;this.set(e[0],e[1])}}};b.prototype.set=function(b,d){insert(b);if(!$jscomp.owns(b,a)){throw new Error('WeakMap key fail: '+b)}b[a][this.id_]=d;return this};b.prototype.get=function(b){return $jscomp.owns(b,a)?b[a][this.id_]:undefined};b.prototype.has=function(b){return $jscomp.owns(b,a)&&$jscomp.owns(b[a],this.id_)};b.prototype['delete']=function(b){if(!$jscomp.owns(b,a)||!$jscomp.owns(b[a],this.id_)){return !1}return delete b[a][this.id_]};return b},'es6','es3');$jscomp.MapEntry=function(){this.previous;this.next;this.head;this.key;this.value};$jscomp.polyfill('Map',function(b){var g=!$jscomp.ASSUME_NO_NATIVE_MAP&&function(){if(!b||!b.prototype.entries||typeof Object.seal!='function'){return !1}try{b=b;var e=Object.seal({x:4});var c=new b($jscomp.makeIterator([[e,'s']]));if(c.get(e)!='s'||c.size!=1||c.get({x:4})||c.set({x:4},'t')!=c||c.size!=2){return !1}var d=c.entries();var a=d.next();if(a.done||a.value[0]!=e||a.value[1]!='s'){return !1}a=d.next();if(a.done||a.value[0].x!=4||a.value[1]!='t'||!d.next().done){return !1}return !0}catch(j){return !1}}();if(g){return b}$jscomp.initSymbol();$jscomp.initSymbolIterator();var e=new WeakMap();var a=function(a){this.data_={};this.head_=f();this.size=0;if(a){var e=$jscomp.makeIterator(a);var c;while(!(c=e.next()).done){var d=c.value;this.set(d[0],d[1])}}};a.prototype.set=function(e,d){var a=c(this,e);if(!a.list){a.list=this.data_[a.id]=[]}if(!a.entry){a.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:e,value:d};a.list.push(a.entry);this.head_.previous.next=a.entry;this.head_.previous=a.entry;this.size++}else {a.entry.value=d}return this};a.prototype['delete']=function(d){var a=c(this,d);if(a.entry&&a.list){a.list.splice(a.index,1);if(!a.list.length){delete this.data_[a.id]}a.entry.previous.next=a.entry.next;a.entry.next.previous=a.entry.previous;a.entry.head=null;this.size--;return !0}return !1};a.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=f();this.size=0};a.prototype.has=function(a){return !!c(this,a).entry};a.prototype.get=function(d){var a=c(this,d).entry;return a&&a.value};a.prototype.entries=function(){return d(this,function(a){return [a.key,a.value]})};a.prototype.keys=function(){return d(this,function(a){return a.key})};a.prototype.values=function(){return d(this,function(a){return a.value})};a.prototype.forEach=function(e,d){var f=this.entries();var c;while(!(c=f.next()).done){var a=c.value;e.call(d,a[1],a[0],this)}};a.prototype[Symbol.iterator]=a.prototype.entries;var c=function(g,e){var f=i(e);var a=g.data_[f];if(a&&$jscomp.owns(g.data_,f)){for(var d=0;d<a.length;d++){var c=a[d];if(e!==e&&c.key!==c.key||e===c.key){return {id:f,list:a,index:d,entry:c}}}}return {id:f,list:a,index:-1,entry:undefined}};var d=function(c,d){var a=c.head_;return $jscomp.iteratorPrototype(function(){if(a){while(a.head!=c.head_){a=a.previous}while(a.next!=a.head){a=a.next;return {done:!1,value:d(a)}}a=null}return {done:!0,value:void 0}})};var f=function(){var a={};a.previous=a.next=a.head=a;return a};var h=0;var i=function(a){var c=a&&typeof a;if(c=='object'||c=='function'){a=a;if(!e.has(a)){var d=''+ ++h;e.set(a,d);return d}return e.get(a)}return 'p_'+a};return a},'es6','es3');$jscomp.polyfill('Math.acosh',function(a){if(a){return a}var b=function(b){b=Number(b);return Math.log(b+Math.sqrt(b*b-1))};return b},'es6','es3');$jscomp.polyfill('Math.asinh',function(a){if(a){return a}var b=function(b){b=Number(b);if(b===0){return b}var c=Math.log(Math.abs(b)+Math.sqrt(b*b+1));return b<0?-c:c};return b},'es6','es3');$jscomp.polyfill('Math.log1p',function(a){if(a){return a}var b=function(b){b=Number(b);if(b<0.25&&b>-0.25){var f=b;var g=1;var c=b;var d=0;var e=1;while(d!=c){f*=b;e*=-1;c=(d=c)+e*f/++g}return c}return Math.log(1+b)};return b},'es6','es3');$jscomp.polyfill('Math.atanh',function(b){if(b){return b}var a=Math.log1p;var c=function(c){c=Number(c);return (a(c)-a(-c))/2};return c},'es6','es3');$jscomp.polyfill('Math.cbrt',function(a){if(a){return a}var b=function(b){if(b===0){return b}b=Number(b);var c=Math.pow(Math.abs(b),1/3);return b<0?-c:c};return b},'es6','es3');$jscomp.polyfill('Math.clz32',function(a){if(a){return a}var b=function(b){b=Number(b)>>>0;if(b===0){return 32}var c=0;if((b&4.29490176E9)===0){b<<=16;c+=16}if((b&4.27819008E9)===0){b<<=8;c+=8}if((b&4.02653184E9)===0){b<<=4;c+=4}if((b&3.221225472E9)===0){b<<=2;c+=2}if((b&2.147483648E9)===0){c++}return c};return b},'es6','es3');$jscomp.polyfill('Math.cosh',function(a){if(a){return a}var b=Math.exp;var c=function(c){c=Number(c);return (b(c)+b(-c))/2};return c},'es6','es3');$jscomp.polyfill('Math.expm1',function(a){if(a){return a}var b=function(b){b=Number(b);if(b<0.25&&b>-0.25){var e=b;var f=1;var c=b;var d=0;while(d!=c){e*=b/++f;c=(d=c)+e}return c}return Math.exp(b)-1};return b},'es6','es3');$jscomp.polyfill('Math.hypot',function(a){if(a){return a}var b=function(c,d,h){c=Number(c);d=Number(d);var b,g,f;var e=Math.max(Math.abs(c),Math.abs(d));for(b=2;b<arguments.length;b++){e=Math.max(e,Math.abs(arguments[b]))}if(e>1.0E100||e<1.0E-100){c=c/e;d=d/e;f=c*c+d*d;for(b=2;b<arguments.length;b++){g=Number(arguments[b])/e;f+=g*g}return Math.sqrt(f)*e}else {f=c*c+d*d;for(b=2;b<arguments.length;b++){g=Number(arguments[b]);f+=g*g}return Math.sqrt(f)}};return b},'es6','es3');$jscomp.polyfill('Math.imul',function(a){if(a){return a}var b=function(b,c){b=Number(b);c=Number(c);var f=b>>>16&65535;var d=b&65535;var g=c>>>16&65535;var e=c&65535;var h=f*e+d*g<<16>>>0;return d*e+h|0};return b},'es6','es3');$jscomp.polyfill('Math.log10',function(a){if(a){return a}var b=function(b){return Math.log(b)/Math.LN10};return b},'es6','es3');$jscomp.polyfill('Math.log2',function(a){if(a){return a}var b=function(b){return Math.log(b)/Math.LN2};return b},'es6','es3');$jscomp.polyfill('Math.sign',function(a){if(a){return a}var b=function(b){b=Number(b);return b===0||isNaN(b)?b:b>0?1:-1};return b},'es6','es3');$jscomp.polyfill('Math.sinh',function(a){if(a){return a}var b=Math.exp;var c=function(c){c=Number(c);if(c===0){return c}return (b(c)-b(-c))/2};return c},'es6','es3');$jscomp.polyfill('Math.tanh',function(a){if(a){return a}var b=function(b){b=Number(b);if(b===0){return b}var c=Math.exp(-2*Math.abs(b));var d=(1-c)/(1+c);return b<0?-d:d};return b},'es6','es3');$jscomp.polyfill('Math.trunc',function(a){if(a){return a}var b=function(b){b=Number(b);if(isNaN(b)||b===Infinity||b===-Infinity||b===0){return b}var c=Math.floor(Math.abs(b));return b<0?-c:c};return b},'es6','es3');$jscomp.polyfill('Number.EPSILON',function(a){return Math.pow(2,-52)},'es6','es3');$jscomp.polyfill('Number.MAX_SAFE_INTEGER',function(){return 9.007199254740991E15},'es6','es3');$jscomp.polyfill('Number.MIN_SAFE_INTEGER',function(){return -9.007199254740991E15},'es6','es3');$jscomp.polyfill('Number.isFinite',function(a){if(a){return a}var b=function(b){if(typeof b!=='number'){return !1}return !isNaN(b)&&b!==Infinity&&b!==-Infinity};return b},'es6','es3');$jscomp.polyfill('Number.isInteger',function(a){if(a){return a}var b=function(b){if(!Number.isFinite(b)){return !1}return b===Math.floor(b)};return b},'es6','es3');$jscomp.polyfill('Number.isNaN',function(a){if(a){return a}var b=function(b){return typeof b==='number'&&isNaN(b)};return b},'es6','es3');$jscomp.polyfill('Number.isSafeInteger',function(a){if(a){return a}var b=function(b){return Number.isInteger(b)&&Math.abs(b)<=Number.MAX_SAFE_INTEGER};return b},'es6','es3');$jscomp.polyfill('Object.assign',function(a){if(a){return a}var b=function(e,f){for(var d=1;d<arguments.length;d++){var b=arguments[d];if(!b){continue}for(var c in b){if($jscomp.owns(b,c)){e[c]=b[c]}}}return e};return b},'es6','es3');$jscomp.polyfill('Object.entries',function(a){if(a){return a}var b=function(c){var d=[];for(var b in c){if($jscomp.owns(c,b)){d.push([b,c[b]])}}return d};return b},'es8','es3');$jscomp.polyfill('Object.getOwnPropertySymbols',function(a){if(a){return a}return function(){return []}},'es6','es5');$jscomp.polyfill('Reflect.ownKeys',function(b){if(b){return b}var a='jscomp_symbol_';function isSymbol(c){return c.substring(0,a.length)==a}var c=function(e){var f=[];var c=Object.getOwnPropertyNames(e);var d=Object.getOwnPropertySymbols(e);for(var a=0;a<c.length;a++){(isSymbol(c[a])?d:f).push(c[a])}return f.concat(d)};return c},'es6','es5');$jscomp.polyfill('Object.getOwnPropertyDescriptors',function(a){if(a){return a}var b=function(e){var d={};var c=Reflect.ownKeys(e);for(var b=0;b<c.length;b++){d[c[b]]=Object.getOwnPropertyDescriptor(e,c[b])}return d};return b},'es8','es5');$jscomp.underscoreProtoCanBeSet=function(){var b={a:!0};var a={};try{a.__proto__=b;return a.a}catch(c){}return !1};$jscomp.setPrototypeOf=typeof Object.setPrototypeOf=='function'?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(a,b){a.__proto__=b;if(a.__proto__!==b){throw new TypeError(a+' is not extensible')}return a}:null;$jscomp.polyfill('Object.setPrototypeOf',function(a){return a||$jscomp.setPrototypeOf},'es6','es5');$jscomp.polyfill('Object.values',function(a){if(a){return a}var b=function(b){var c=[];for(var d in b){if($jscomp.owns(b,d)){c.push(b[d])}}return c};return b},'es8','es3');$jscomp.polyfill('Reflect.apply',function(a){if(a){return a}var c=Function.prototype.apply;var b=function(e,d,b){return c.call(e,d,b)};return b},'es6','es3');$jscomp.objectCreate=$jscomp.ASSUME_ES5||typeof Object.create=='function'?Object.create:function(b){var a=function(){};a.prototype=b;return new a()};$jscomp.construct=function(){function reflectConstructWorks(){function Base(){}function Derived(){}new Base();Reflect.construct(Base,[],Derived);return new Base() instanceof Base}if(typeof Reflect!='undefined'&&Reflect.construct){if(reflectConstructWorks()){return Reflect.construct}var b=Reflect.construct;var a=function(e,d,a){var c=b(e,d);if(a){Reflect.setPrototypeOf(c,a.prototype)}return c};return a}function construct(b,d,a){if(a===undefined){a=b}var f=a.prototype||Object.prototype;var c=$jscomp.objectCreate(f);var e=Function.prototype.apply;var g=e.call(b,c,d);return g||c}return construct}();$jscomp.polyfill('Reflect.construct',function(a){return $jscomp.construct},'es6','es3');$jscomp.polyfill('Reflect.defineProperty',function(a){if(a){return a}var b=function(e,d,c){try{Object.defineProperty(e,d,c);var b=Object.getOwnPropertyDescriptor(e,d);if(!b){return !1}return b.configurable===(c.configurable||!1)&&b.enumerable===(c.enumerable||!1)&&('value' in b?b.value===c.value&&b.writable===(c.writable||!1):b.get===c.get&&b.set===c.set)}catch(f){return !1}};return b},'es6','es5');$jscomp.polyfill('Reflect.deleteProperty',function(a){if(a){return a}var b=function(c,b){if(!$jscomp.owns(c,b)){return !0}try{return delete c[b]}catch(d){return !1}};return b},'es6','es3');$jscomp.polyfill('Reflect.getOwnPropertyDescriptor',function(a){return a||Object.getOwnPropertyDescriptor},'es6','es5');$jscomp.polyfill('Reflect.getPrototypeOf',function(a){return a||Object.getPrototypeOf},'es6','es5');$jscomp.findDescriptor=function(d,c){var a=d;while(a){var b=Reflect.getOwnPropertyDescriptor(a,c);if(b){return b}a=Reflect.getPrototypeOf(a)}return undefined};$jscomp.polyfill('Reflect.get',function(a){if(a){return a}var b=function(d,c,e){if(arguments.length<=2){return d[c]}var b=$jscomp.findDescriptor(d,c);if(b){return b.get?b.get.call(e):b.value}return undefined};return b},'es6','es5');$jscomp.polyfill('Reflect.has',function(a){if(a){return a}var b=function(c,b){return b in c};return b},'es6','es3');$jscomp.polyfill('Reflect.isExtensible',function(a){if(a){return a}if($jscomp.ASSUME_ES5||typeof Object.isExtensible=='function'){return Object.isExtensible}return function(){return !0}},'es6','es3');$jscomp.polyfill('Reflect.preventExtensions',function(a){if(a){return a}if(!($jscomp.ASSUME_ES5||typeof Object.preventExtensions=='function')){return function(){return !1}}var b=function(b){Object.preventExtensions(b);return !Object.isExtensible(b)};return b},'es6','es3');$jscomp.polyfill('Reflect.set',function(a){if(a){return a}var b=function(b,d,e,f){var c=$jscomp.findDescriptor(b,d);if(!c){if(Reflect.isExtensible(b)){b[d]=e;return !0}return !1}if(c.set){c.set.call(arguments.length>3?f:b,e);return !0}else {if(c.writable&&!Object.isFrozen(b)){b[d]=e;return !0}}return !1};return b},'es6','es5');$jscomp.polyfill('Reflect.setPrototypeOf',function(a){if(a){return a}else {if($jscomp.setPrototypeOf){var b=$jscomp.setPrototypeOf;var c=function(c,d){try{b(c,d);return !0}catch(e){return !1}};return c}else {return null}}},'es6','es5');$jscomp.polyfill('Set',function(b){var c=!$jscomp.ASSUME_NO_NATIVE_SET&&function(){if(!b||!b.prototype.entries||typeof Object.seal!='function'){return !1}try{b=b;var d=Object.seal({x:4});var c=new b($jscomp.makeIterator([d]));if(!c.has(d)||c.size!=1||c.add(d)!=c||c.size!=1||c.add({x:4})!=c||c.size!=2){return !1}var e=c.entries();var a=e.next();if(a.done||a.value[0]!=d||a.value[1]!=d){return !1}a=e.next();if(a.done||a.value[0]==d||a.value[0].x!=4||a.value[1]!=a.value[0]){return !1}return e.next().done}catch(f){return !1}}();if(c){return b}$jscomp.initSymbol();$jscomp.initSymbolIterator();var a=function(a){this.map_=new Map();if(a){var e=$jscomp.makeIterator(a);var c;while(!(c=e.next()).done){var d=c.value;this.add(d)}}this.size=this.map_.size};a.prototype.add=function(a){this.map_.set(a,a);this.size=this.map_.size;return this};a.prototype['delete']=function(c){var a=this.map_['delete'](c);this.size=this.map_.size;return a};a.prototype.clear=function(){this.map_.clear();this.size=0};a.prototype.has=function(a){return this.map_.has(a)};a.prototype.entries=function(){return this.map_.entries()};a.prototype.values=function(){return this.map_.values()};a.prototype.keys=a.prototype.values;a.prototype[Symbol.iterator]=a.prototype.values;a.prototype.forEach=function(c,a){var d=this;this.map_.forEach(function(e){return c.call(a,e,e,d)})};return a},'es6','es3');$jscomp.checkStringArgs=function(a,c,b){if(a==null){throw new TypeError("The 'this' value for String.prototype."+b+' must not be null or undefined')}if(c instanceof RegExp){throw new TypeError('First argument to String.prototype.'+b+' must not be a regular expression')}return a+''};$jscomp.polyfill('String.prototype.codePointAt',function(a){if(a){return a}var b=function(b){var e=$jscomp.checkStringArgs(this,null,'codePointAt');var f=e.length;b=Number(b)||0;if(!(b>=0&&b<f)){return void 0}b=b|0;var c=e.charCodeAt(b);if(c<55296||c>56319||b+1===f){return c}var d=e.charCodeAt(b+1);if(d<56320||d>57343){return c}return (c-55296)*1024+d+9216};return b},'es6','es3');$jscomp.polyfill('String.prototype.endsWith',function(a){if(a){return a}var b=function(b,c){var d=$jscomp.checkStringArgs(this,b,'endsWith');b=b+'';if(c===void 0){c=d.length}var f=Math.max(0,Math.min(c|0,d.length));var e=b.length;while(e>0&&f>0){if(d[--f]!=b[--e]){return !1}}return e<=0};return b},'es6','es3');$jscomp.polyfill('String.fromCodePoint',function(a){if(a){return a}var b=function(e){var c='';for(var d=0;d<arguments.length;d++){var b=Number(arguments[d]);if(b<0||b>1114111||b!==Math.floor(b)){throw new RangeError('invalid_code_point '+b)}if(b<=65535){c+=String.fromCharCode(b)}else {b-=65536;c+=String.fromCharCode(b>>>10&1023|55296);c+=String.fromCharCode(b&1023|56320)}}return c};return b},'es6','es3');$jscomp.polyfill('String.prototype.includes',function(a){if(a){return a}var b=function(b,c){var d=$jscomp.checkStringArgs(this,b,'includes');return d.indexOf(b,c||0)!==-1};return b},'es6','es3');$jscomp.polyfill('String.prototype.repeat',function(a){if(a){return a}var b=function(b){var c=$jscomp.checkStringArgs(this,null,'repeat');if(b<0||b>1342177279){throw new RangeError('Invalid count value')}b=b|0;var d='';while(b){if(b&1){d+=c}if(b>>>=1){c+=c}}return d};return b},'es6','es3');$jscomp.stringPadding=function(c,a){var b=c!==undefined?String(c):' ';if(!(a>0)||!b){return ''}var d=Math.ceil(a/b.length);return b.repeat(d).substring(0,a)};$jscomp.polyfill('String.prototype.padEnd',function(a){if(a){return a}var b=function(d,c){var b=$jscomp.checkStringArgs(this,null,'padStart');var e=d-b.length;return b+$jscomp.stringPadding(c,e)};return b},'es8','es3');$jscomp.polyfill('String.prototype.padStart',function(a){if(a){return a}var b=function(d,c){var b=$jscomp.checkStringArgs(this,null,'padStart');var e=d-b.length;return $jscomp.stringPadding(c,e)+b};return b},'es8','es3');$jscomp.polyfill('String.prototype.startsWith',function(a){if(a){return a}var b=function(b,g){var c=$jscomp.checkStringArgs(this,b,'startsWith');b=b+'';var h=c.length;var e=b.length;var f=Math.max(0,Math.min(g|0,c.length));var d=0;while(d<e&&f<h){if(c[f++]!=b[d++]){return !1}}return d>=e};return b},'es6','es3');$jscomp.arrayFromIterator=function(c){var b;var a=[];while(!(b=c.next()).done){a.push(b.value)}return a};$jscomp.arrayFromIterable=function(a){if(a instanceof Array){return a}else {return $jscomp.arrayFromIterator($jscomp.makeIterator(a))}};$jscomp.inherits=function(a,b){a.prototype=$jscomp.objectCreate(b.prototype);a.prototype.constructor=a;if($jscomp.setPrototypeOf){var e=$jscomp.setPrototypeOf;e(a,b)}else {for(var c in b){if(c=='prototype'){continue}if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);if(d){Object.defineProperty(a,c,d)}}else {a[c]=b[c]}}}a.superClass_=b.prototype};$jscomp.polyfill('WeakSet',function(b){function isConformant(){if(!b||!Object.seal){return !1}try{var c=Object.seal({});var d=Object.seal({});var a=new b([c]);if(!a.has(c)||a.has(d)){return !1}a['delete'](c);a.add(d);return !a.has(c)&&a.has(d)}catch(e){return !1}}if(isConformant()){return b}var a=function(a){this.map_=new WeakMap();if(a){$jscomp.initSymbol();$jscomp.initSymbolIterator();var e=$jscomp.makeIterator(a);var c;while(!(c=e.next()).done){var d=c.value;this.add(d)}}};a.prototype.add=function(a){this.map_.set(a,!0);return this};a.prototype.has=function(a){return this.map_.has(a)};a.prototype['delete']=function(a){return this.map_['delete'](a)};return a},'es6','es3');try{if(Array.prototype.values.toString().indexOf('[native code]')==-1){delete Array.prototype.values}}catch(a){}!function(a,g){var e,b={},c=function(b,h){var d,e,c;if('string'==typeof b){return f(b)}for(d=[],e=b.length,c=0;e>c;c++){d.push(f(b[c]))}return h.apply(null,d)},h=function(e,b,d){2===arguments.length&&(d=b,b=null),c(b||[],function(){i(e,d,arguments)})},i=function(i,e,f){var h,d={exports:e};'function'==typeof e&&(f.length||(f=[c,d.exports,d]),h=e.apply(null,f),void 0!==h&&(d.exports=h)),b[i]=d.exports},f=function(c){var d=b[c]||a[c];if(!d){throw new Error('`'+c+'` is undefined')}return d},j=function(i){var d,c,f,e,j,h;h=function(b){return b&&b.charAt(0).toUpperCase()+b.substr(1)};for(d in b){if(c=i,b.hasOwnProperty(d)){for(f=d.split('/'),j=h(f.pop());e=h(f.shift());){c[e]=c[e]||{},c=c[e]}c[j]=b[d]}}return i},d=function(b){return a.__dollar=b,j(g(a,h,c))};'object'==typeof module&&'object'==typeof module.exports?module.exports=d():'function'==typeof define&&define.amd?define(['jquery'],d):(e=a.WebUploader,a.WebUploader=d(),a.WebUploader.noConflict=function(){a.WebUploader=e})}(window,function(b,a,c){return a('dollar-third',[],function(){var d=b.require,e=b.__dollar||b.jQuery||b.Zepto||d('jquery')||d('zepto');if(!e){throw new Error('jQuery or Zepto not found!')}return e}),a('dollar',['dollar-third'],function(d){return d}),a('promise-third',['dollar'],function(d){return {Deferred:d.Deferred,when:d.when,isPromise:function(e){return e&&'function'==typeof e.then}}}),a('promise',['promise-third'],function(d){return d}),a('base',['dollar','promise'],function(g,h){function d(d){return function(){return j.apply(d,arguments)}}function e(d,e){return function(){return d.apply(e,arguments)}}function f(e){var d;return Object.create?Object.create(e):(d=function(){},d.prototype=e,new d())}var i=function(){},j=Function.call;return {version:'0.1.8-alpha',$:g,Deferred:h.Deferred,isPromise:h.isPromise,when:h.when,browser:function(d){var e={},f=d.match(/WebKit\/([\d.]+)/),i=d.match(/Chrome\/([\d.]+)/)||d.match(/CriOS\/([\d.]+)/),j=d.match(/MSIE\s([\d\.]+)/)||d.match(/(?:trident)(?:.*rv:([\w.]+))?/i),k=d.match(/Firefox\/([\d.]+)/),l=d.match(/Safari\/([\d.]+)/),m=d.match(/OPR\/([\d.]+)/);return f&&(e.webkit=parseFloat(f[1])),i&&(e.chrome=parseFloat(i[1])),j&&(e.ie=parseFloat(j[1])),k&&(e.firefox=parseFloat(k[1])),l&&(e.safari=parseFloat(l[1])),m&&(e.opera=parseFloat(m[1])),e}(navigator.userAgent),os:function(e){var d={},f=e.match(/(?:Android);?[\s\/]+([\d.]+)?/),i=e.match(/(?:iPad|iPod|iPhone).*OS\s([\d_]+)/);return f&&(d.android=parseFloat(f[1])),i&&(d.ios=parseFloat(i[1].replace(/_/g,'.'))),d}(navigator.userAgent),inherits:function(i,d,j){var e;return 'function'==typeof d?(e=d,d=null):e=d&&d.hasOwnProperty('constructor')?d.constructor:function(){return i.apply(this,arguments)},g.extend(!0,e,i,j||{}),e.__super__=i.prototype,e.prototype=f(i.prototype),d&&g.extend(!0,e.prototype,d),e},noop:i,bindFn:e,log:function(){return b.console?e(console.log,console):i}(),nextTick:function(){return function(d){setTimeout(d,1)}}(),slice:d([].slice),guid:function(){var d=0;return function(i){for(var e=(+new Date()).toString(32),f=0;5>f;f++){e+=Math.floor(65535*Math.random()).toString(32)}return (i||'wu_')+e+(d++).toString(32)}}(),formatSize:function(d,i,e){var f;for(e=e||['B','K','M','G','TB'];(f=e.shift())&&d>1024;){d/=1024}return ('B'===f?d:d.toFixed(i||2))+f}}}),a('mediator',['base'],function(g){function b(i,f,d,h){return e.grep(i,function(e){return !(!e||f&&e.e!==f||d&&e.cb!==d&&e.cb._cb!==d||h&&e.ctx!==h)})}function c(d,f,h){e.each((d||'').split(i),function(i,e){h(e,f)})}function d(e,i){for(var d,f=!1,h=-1,j=e.length;++h<j;){if(d=e[h],d.cb.apply(d.ctx2,i)===!1){f=!0;break}}return !f}var f,e=g.$,h=[].slice,i=/\s+/;return f={on:function(h,e,f){var d,i=this;return e?(d=this._events||(this._events=[]),c(h,e,function(k,l){var j={e:k};j.cb=l,j.ctx=f,j.ctx2=f||i,j.id=d.length,d.push(j)}),this):this},once:function(h,e,f){var d=this;return e?(c(h,e,function(j,k){var i=function(){return d.off(j,i),k.apply(f||d,arguments)};i._cb=k,d.on(j,i,f)}),d):d},off:function(f,h,i){var d=this._events;return d?f||h||i?(c(f,h,function(j,k){e.each(b(d,j,k,i),function(){delete d[this.id]})}),this):(this._events=[],this):this},trigger:function(e){var f,i,j;return this._events&&e?(f=h.call(arguments,1),i=b(this._events,e),j=b(this._events,'all'),d(i,f)&&d(j,arguments)):this}},e.extend({installTo:function(d){return e.extend(d,f)}},f)}),a('uploader',['base','mediator'],function(e,f){function c(g){this.options=d.extend(!0,{},c.options,g),this._init(this.options)}var d=e.$;return c.options={},f.installTo(c.prototype),d.each({upload:'start-upload',stop:'stop-upload',getFile:'get-file',getFiles:'get-files',addFile:'add-file',addFiles:'add-file',sort:'sort-files',removeFile:'remove-file',cancelFile:'cancel-file',skipFile:'skip-file',retry:'retry',isInProgress:'is-in-progress',makeThumb:'make-thumb',md5File:'md5-file',getDimension:'get-dimension',addButton:'add-btn',predictRuntimeType:'predict-runtime-type',refresh:'refresh',disable:'disable',enable:'enable',reset:'reset'},function(d,g){c.prototype[d]=function(){return this.request(g,arguments)}}),d.extend(c.prototype,{state:'pending',_init:function(g){var d=this;d.request('init',g,function(){d.state='ready',d.trigger('ready')})},option:function(g,i){var h=this.options;return arguments.length>1?(d.isPlainObject(i)&&d.isPlainObject(h[g])?d.extend(h[g],i):h[g]=i,void 0):g?h[g]:h},getStats:function(){var d=this.request('get-stats');return d?{successNum:d.numOfSuccess,progressNum:d.numOfProgress,cancelNum:d.numOfCancel,invalidNum:d.numOfInvalid,uploadFailNum:d.numOfUploadFailed,queueNum:d.numOfQueue,interruptNum:d.numofInterrupt}:{}},trigger:function(h){var i=[].slice.call(arguments,1),j=this.options,g='on'+h.substring(0,1).toUpperCase()+h.substring(1);return f.trigger.apply(this,arguments)===!1||d.isFunction(j[g])&&j[g].apply(this,i)===!1||d.isFunction(this[g])&&this[g].apply(this,i)===!1||f.trigger.apply(f,[this,h].concat(i))===!1?!1:!0},destroy:function(){this.request('destroy',arguments),this.off()},request:e.noop}),e.create=c.create=function(d){return new c(d)},e.Uploader=c,c}),a('runtime/runtime',['base','mediator'],function(f,h){function c(d){this.options=e.extend({container:document.body},d),this.uid=f.guid('rt_')}var e=f.$,d={},g=function(d){for(var e in d){if(d.hasOwnProperty(e)){return e}}return null};return e.extend(c.prototype,{getContainer:function(){var g,d,i=this.options;return this._container?this._container:(g=e(i.container||document.body),d=e(document.createElement('div')),d.attr('id','rt_'+this.uid),d.css({position:'absolute',top:'0px',left:'0px',width:'1px',height:'1px',overflow:'hidden'}),g.append(d),g.addClass('webuploader-container'),this._container=d,this._parent=g,d)},init:f.noop,exec:f.noop,destroy:function(){this._container&&this._container.remove(),this._parent&&this._parent.removeClass('webuploader-container'),this.off()}}),c.orders='html5,flash',c.addRuntime=function(e,g){d[e]=g},c.hasRuntime=function(e){return !!(e?d[e]:g(d))},c.create=function(k,j){var i,l;if(j=j||c.orders,e.each(j.split(/\s*,\s*/g),function(){return d[this]?(i=this,!1):void 0}),i=i||g(d),!i){throw new Error('Runtime Error')}return l=new d[i](k)},h.installTo(c.prototype),c}),a('runtime/client',['base','mediator','runtime/runtime'],function(f,g,h){function d(k,j){var d,i=f.Deferred();this.uid=f.guid('client_'),this.runtimeReady=function(d){return i.done(d)},this.connectRuntime=function(l,m){if(d){throw new Error('already connected!')}return i.done(m),'string'==typeof l&&e.get(l)&&(d=e.get(l)),d=d||e.get(null,j),d?(f.$.extend(d.options,l),d.__promise.then(i.resolve),d.__client++):(d=h.create(l,l.runtimeOrder),d.__promise=i.promise(),d.once('ready',i.resolve),d.init(),e.add(d),d.__client=1),j&&(d.__standalone=j),d},this.getRuntime=function(){return d},this.disconnectRuntime=function(){d&&(d.__client--,d.__client<=0&&(e.remove(d),delete d.__promise,d.destroy()),d=null)},this.exec=function(){if(d){var e=f.slice(arguments);return k&&e.unshift(k),d.exec.apply(this,e)}},this.getRuid=function(){return d&&d.uid},this.destroy=function(d){return function(){d&&d.apply(this,arguments),this.trigger('destroy'),this.off(),this.exec('destroy'),this.disconnectRuntime()}}(this.destroy)}var e;return e=function(){var d={};return {add:function(e){d[e.uid]=e},get:function(i,j){var e;if(i){return d[i]}for(e in d){if(!j||!d[e].__standalone){return d[e]}}return null},remove:function(e){delete d[e.uid]}}}(),g.installTo(d.prototype),d}),a('lib/dnd',['base','mediator','runtime/client'],function(e,h,f){function d(i){i=this.options=g.extend({},d.options,i),i.container=g(i.container),i.container.length&&f.call(this,'DragAndDrop')}var g=e.$;return d.options={accept:null,disableGlobalDnd:!1},e.inherits(f,{constructor:d,init:function(){var d=this;d.connectRuntime(d.options,function(){d.exec('init'),d.trigger('ready')})}}),h.installTo(d.prototype),d}),a('widgets/widget',['base','uploader'],function(e,g){function c(d){if(!d){return !1}var h=d.length,i=f.type(d);return 1===d.nodeType&&h?!0:'array'===i||'function'!==i&&'string'!==i&&(0===h||'number'==typeof h&&h>0&&h-1 in d)}function d(d){this.owner=d,this.options=d.options}var f=e.$,j=g.prototype._init,k=g.prototype.destroy,i={},h=[];return f.extend(d.prototype,{init:e.noop,invoke:function(h,j){var d=this.responseMap;return d&&h in d&&d[h] in this&&f.isFunction(this[d[h]])?this[d[h]].apply(this,j):i},request:function(){return this.owner.request.apply(this.owner,arguments)}}),f.extend(g.prototype,{_init:function(){var d=this,k=d._widgets=[],i=d.options.disableWidgets||'';return f.each(h,function(h,f){(!i||!~i.indexOf(f._name))&&k.push(new f(d))}),j.apply(d,arguments)},request:function(q,d,h){var o,f,j,k,l=0,m=this._widgets,r=m&&m.length,p=[],n=[];for(d=c(d)?d:[d];r>l;l++){o=m[l],f=o.invoke(q,d),f!==i&&(e.isPromise(f)?n.push(f):p.push(f))}return h||n.length?(j=e.when.apply(e,n),k=j.pipe?'pipe':'then',j[k](function(){var i=e.Deferred(),f=arguments;return 1===f.length&&(f=f[0]),setTimeout(function(){i.resolve(f)},1),i.promise()})[h?k:'done'](h||e.noop)):p[0]},destroy:function(){k.apply(this,arguments),this._widgets=null}}),g.register=d.register=function(l,j){var k,i={init:'init',destroy:'destroy',name:'anonymous'};return 1===arguments.length?(j=l,f.each(j,function(d){return '_'===d[0]||'name'===d?('name'===d&&(i.name=j.name),void 0):(i[d.replace(/[A-Z]/g,'-$&').toLowerCase()]=d,void 0)})):i=f.extend(i,l),j.responseMap=i,k=e.inherits(d,j),k._name=i.name,h.push(k),k},g.unRegister=d.unRegister=function(d){if(d&&'anonymous'!==d){for(var f=h.length;f--;){h[f]._name===d&&h.splice(f,1)}}},d}),a('widgets/filednd',['base','uploader','lib/dnd','widgets/widget'],function(d,e,f){var g=d.$;return e.options.dnd='',e.register({name:'dnd',init:function(i){if(i.dnd&&'html5'===this.request('predict-runtime-type')){var h,j=this,k=d.Deferred(),l=g.extend({},{disableGlobalDnd:i.disableGlobalDnd,container:i.dnd,accept:i.accept});return this.dnd=h=new f(l),h.once('ready',k.resolve),h.on('drop',function(g){j.request('add-file',[g])}),h.on('accept',function(g){return j.owner.trigger('dndAccept',g)}),h.init(),k.promise()}},destroy:function(){this.dnd&&this.dnd.destroy()}})}),a('lib/filepaste',['base','mediator','runtime/client'],function(e,h,f){function d(d){d=this.options=g.extend({},d),d.container=g(d.container||document.body),f.call(this,'FilePaste')}var g=e.$;return e.inherits(f,{constructor:d,init:function(){var d=this;d.connectRuntime(d.options,function(){d.exec('init'),d.trigger('ready')})}}),h.installTo(d.prototype),d}),a('widgets/filepaste',['base','uploader','lib/filepaste','widgets/widget'],function(d,e,f){var g=d.$;return e.register({name:'paste',init:function(i){if(i.paste&&'html5'===this.request('predict-runtime-type')){var h,k=this,j=d.Deferred(),l=g.extend({},{container:i.paste,accept:i.accept});return this.paste=h=new f(l),h.once('ready',j.resolve),h.on('paste',function(g){k.owner.request('add-file',[g])}),h.init(),j.promise()}},destroy:function(){this.paste&&this.paste.destroy()}})}),a('lib/blob',['base','runtime/client'],function(e,d){function c(h,f){var g=this;g.source=f,g.ruid=h,this.size=f.size||0,this.type=!f.type&&this.ext&&~'jpg,jpeg,png,gif,bmp'.indexOf(this.ext)?'image/'+('jpg'===this.ext?'jpeg':this.ext):f.type||'application/octet-stream',d.call(g,'Blob'),this.uid=f.uid||this.uid,h&&g.connectRuntime(h)}return e.inherits(d,{constructor:c,slice:function(f,g){return this.exec('slice',f,g)},getSource:function(){return this.source}}),c}),a('lib/file',['base','lib/blob'],function(e,d){function c(j,h){var i;this.name=h.name||'untitled'+f++,i=g.exec(h.name)?RegExp.$1.toLowerCase():'',!i&&h.type&&(i=/\/(jpg|jpeg|png|gif|bmp)$/i.exec(h.type)?RegExp.$1.toLowerCase():'',this.name+='.'+i),this.ext=i,this.lastModifiedDate=h.lastModifiedDate||(new Date()).toLocaleString(),d.apply(this,arguments)}var f=1,g=/\.([^.]+)$/;return e.inherits(d,c)}),a('lib/filepicker',['base','runtime/client','lib/file'],function(f,g,h){function e(i){if(i=this.options=d.extend({},e.options,i),i.container=d(i.id),!i.container.length){throw new Error('按钮指定错误')}i.innerHTML=i.innerHTML||i.label||i.container.html()||'',i.button=d(i.button||document.createElement('div')),i.button.html(i.innerHTML),i.container.html(i.button),g.call(this,'FilePicker',!0)}var d=f.$;return e.options={button:null,container:null,label:null,innerHTML:null,multiple:!0,accept:null,name:'file',style:'webuploader-pick'},f.inherits(g,{constructor:e,init:function(){var e=this,i=e.options,j=i.button,k=i.style;k&&j.addClass('webuploader-pick'),e.on('all',function(m){var l;switch(m){case 'mouseenter':k&&j.addClass('webuploader-pick-hover');break;case 'mouseleave':k&&j.removeClass('webuploader-pick-hover');break;case 'change':l=e.exec('getFiles'),e.trigger('select',d.map(l,function(d){return d=new h(e.getRuid(),d),d._refer=i.container,d}),i.container);}}),e.connectRuntime(i,function(){e.refresh(),e.exec('init',i),e.trigger('ready')}),this._resizeHandler=f.bindFn(this.refresh,this),d(b).on('resize',this._resizeHandler)},refresh:function(){var j=this.getRuntime().getContainer(),d=this.options.button,e=d.outerWidth?d.outerWidth():d.width(),i=d.outerHeight?d.outerHeight():d.height(),k=d.offset();e&&i&&j.css({bottom:'auto',right:'auto',width:e+'px',height:i+'px'}).offset(k)},enable:function(){var d=this.options.button;d.removeClass('webuploader-pick-disable'),this.refresh()},disable:function(){var d=this.options.button;this.getRuntime().getContainer().css({top:'-99999px'}),d.addClass('webuploader-pick-disable')},destroy:function(){var e=this.options.button;d(b).off('resize',this._resizeHandler),e.removeClass('webuploader-pick-disable webuploader-pick-hover webuploader-pick')}}),e}),a('widgets/filepicker',['base','uploader','lib/filepicker','widgets/widget'],function(e,f,g){var d=e.$;return d.extend(f.options,{pick:null,accept:null}),f.register({name:'picker',init:function(d){return this.pickers=[],d.pick&&this.addBtn(d.pick)},refresh:function(){d.each(this.pickers,function(){this.refresh()})},addBtn:function(h){var i=this,j=i.options,k=j.accept,l=[];if(h){return d.isPlainObject(h)||(h={id:h}),d(h.id).each(function(){var o,m,n;n=e.Deferred(),o=d.extend({},h,{accept:d.isPlainObject(k)?[k]:k,swf:j.swf,runtimeOrder:j.runtimeOrder,id:this}),m=new g(o),m.once('ready',n.resolve),m.on('select',function(d){i.owner.request('add-file',[d])}),m.on('dialogopen',function(){i.owner.trigger('dialogOpen',m.button)}),m.init(),i.pickers.push(m),l.push(n.promise())}),e.when.apply(e,l)}},disable:function(){d.each(this.pickers,function(){this.disable()})},enable:function(){d.each(this.pickers,function(){this.enable()})},destroy:function(){d.each(this.pickers,function(){this.destroy()}),this.pickers=null}})}),a('lib/image',['base','runtime/client','lib/blob'],function(e,f,g){function d(i){this.options=h.extend({},d.options,i),f.call(this,'Image'),this.on('load',function(){this._info=this.exec('info'),this._meta=this.exec('meta')})}var h=e.$;return d.options={quality:90,crop:!1,preserveHeaders:!1,allowMagnify:!1},e.inherits(f,{constructor:d,info:function(d){return d?(this._info=d,this):this._info},meta:function(d){return d?(this._meta=d,this):this._meta},loadFromBlob:function(h){var d=this,i=h.getRuid();this.connectRuntime(i,function(){d.exec('init',d.options),d.exec('loadFromBlob',h)})},resize:function(){var d=e.slice(arguments);return this.exec.apply(this,['resize'].concat(d))},crop:function(){var d=e.slice(arguments);return this.exec.apply(this,['crop'].concat(d))},getAsDataUrl:function(d){return this.exec('getAsDataUrl',d)},getAsBlob:function(d){var h=this.exec('getAsBlob',d);return new g(this.getRuid(),h)}}),d}),a('widgets/image',['base','uploader','lib/image','widgets/widget'],function(e,f,g){var h,d=e.$;return h=function(j){var d=0,h=[],i=function(){for(var i;h.length&&j>d;){i=h.shift(),d+=i[0],i[1]()}};return function(l,k,m){h.push([k,m]),l.once('destroy',function(){d-=k,setTimeout(i,1)}),setTimeout(i,1)}}(5242880),d.extend(f.options,{thumb:{width:110,height:110,quality:70,allowMagnify:!0,crop:!0,preserveHeaders:!1,type:'image/jpeg'},compress:{width:1600,height:1600,quality:90,allowMagnify:!1,crop:!1,preserveHeaders:!0}}),f.register({name:'image',makeThumb:function(i,n,k,l){var m,j;return i=this.request('get-file',i),i.type.match(/^image/)?(m=d.extend({},this.options.thumb),d.isPlainObject(k)&&(m=d.extend(m,k),k=null),k=k||m.width,l=l||m.height,j=new g(m),j.once('load',function(){i._info=i._info||j.info(),i._meta=i._meta||j.meta(),1>=k&&k>0&&(k=i._info.width*k),1>=l&&l>0&&(l=i._info.height*l),j.resize(k,l)}),j.once('complete',function(){n(!1,j.getAsDataUrl(m.type)),j.destroy()}),j.once('error',function(d){n(d||!0),j.destroy()}),h(j,i.source.size,function(){i._info&&j.info(i._info),i._meta&&j.meta(i._meta),j.loadFromBlob(i.source)}),void 0):(n(!0),void 0)},beforeSendFile:function(h){var i,k,j=this.options.compress||this.options.resize,l=j&&j.compressSize||0,m=j&&j.noCompressIfLarger||!1;return h=this.request('get-file',h),!j||!~'image/jpeg,image/jpg'.indexOf(h.type)||h.size<l||h._compressed?void 0:(j=d.extend({},j),k=e.Deferred(),i=new g(j),k.always(function(){i.destroy(),i=null}),i.once('error',k.reject),i.once('load',function(){var d=j.width,k=j.height;h._info=h._info||i.info(),h._meta=h._meta||i.meta(),1>=d&&d>0&&(d=h._info.width*d),1>=k&&k>0&&(k=h._info.height*k),i.resize(d,k)}),i.once('complete',function(){var d,l;try{d=i.getAsBlob(j.type),l=h.size,(!m||d.size<l)&&(h.source=d,h.size=d.size,h.trigger('resize',d.size,l)),h._compressed=!0,k.resolve()}catch(n){k.resolve()}}),h._info&&i.info(h._info),h._meta&&i.meta(h._meta),i.loadFromBlob(h.source),k.promise())}})}),a('file',['base','mediator'],function(f,g){function c(){return i+j++}function d(h){this.name=h.name||'Untitled',this.size=h.size||0,this.type=h.type||'application/octet-stream',this.lastModifiedDate=h.lastModifiedDate||1*new Date(),this.id=c(),this.ext=k.exec(this.name)?RegExp.$1:'',this.statusText='',e[this.id]=d.Status.INITED,this.source=h,this.loaded=0,this.on('error',function(e){this.setStatus(d.Status.ERROR,e)})}var h=f.$,i='WU_FILE_',j=0,k=/\.([^.]+)$/,e={};return h.extend(d.prototype,{setStatus:function(d,h){var i=e[this.id];'undefined'!=typeof h&&(this.statusText=h),d!==i&&(e[this.id]=d,this.trigger('statuschange',d,i))},getStatus:function(){return e[this.id]},getSource:function(){return this.source},destroy:function(){this.off(),delete e[this.id]}}),g.installTo(d.prototype),d.Status={INITED:'inited',QUEUED:'queued',PROGRESS:'progress',ERROR:'error',COMPLETE:'complete',CANCELLED:'cancelled',INTERRUPT:'interrupt',INVALID:'invalid'},d}),a('queue',['base','mediator','file'],function(g,h,i){function d(){this.stats={numOfQueue:0,numOfSuccess:0,numOfCancel:0,numOfProgress:0,numOfUploadFailed:0,numOfInvalid:0,numofDeleted:0,numofInterrupt:0},this._queue=[],this._map={}}var f=g.$,e=i.Status;return f.extend(d.prototype,{append:function(d){return this._queue.push(d),this._fileAdded(d),this},prepend:function(d){return this._queue.unshift(d),this._fileAdded(d),this},getFile:function(d){return 'string'!=typeof d?d:this._map[d]},fetch:function(f){var d,j,k=this._queue.length;for(f=f||e.QUEUED,d=0;k>d;d++){if(j=this._queue[d],f===j.getStatus()){return j}}return null},sort:function(d){'function'==typeof d&&this._queue.sort(d)},getFiles:function(){for(var d,j=[].slice.call(arguments,0),k=[],e=0,l=this._queue.length;l>e;e++){d=this._queue[e],(!j.length||~f.inArray(d.getStatus(),j))&&k.push(d)}return k},removeFile:function(d){var e=this._map[d.id];e&&(delete this._map[d.id],this._delFile(d),d.destroy(),this.stats.numofDeleted++)},_fileAdded:function(d){var e=this,f=this._map[d.id];f||(this._map[d.id]=d,d.on('statuschange',function(f,j){e._onFileStatusChange(f,j)}))},_delFile:function(e){for(var d=this._queue.length-1;d>=0;d--){if(this._queue[d]==e){this._queue.splice(d,1);break}}},_onFileStatusChange:function(f,j){var d=this.stats;switch(j){case e.PROGRESS:d.numOfProgress--;break;case e.QUEUED:d.numOfQueue--;break;case e.ERROR:d.numOfUploadFailed--;break;case e.INVALID:d.numOfInvalid--;break;case e.INTERRUPT:d.numofInterrupt--;}switch(f){case e.QUEUED:d.numOfQueue++;break;case e.PROGRESS:d.numOfProgress++;break;case e.ERROR:d.numOfUploadFailed++;break;case e.COMPLETE:d.numOfSuccess++;break;case e.CANCELLED:d.numOfCancel++;break;case e.INVALID:d.numOfInvalid++;break;case e.INTERRUPT:d.numofInterrupt++;}}}),h.installTo(d.prototype),d}),a('widgets/queue',['base','uploader','queue','file','lib/file','runtime/client','widgets/widget'],function(f,j,g,d,h,k){var i=f.$,l=/\.\w+$/,e=d.Status;return j.register({name:'queue',init:function(e){var o,r,m,p,n,s,q,l=this;if(i.isPlainObject(e.accept)&&(e.accept=[e.accept]),e.accept){for(n=[],m=0,r=e.accept.length;r>m;m++){p=e.accept[m].extensions,p&&n.push(p)}n.length&&(s='\\.'+n.join(',').replace(/,/g,'$|\\.').replace(/\*/g,'.*')+'$'),l.accept=new RegExp(s,'i')}return l.queue=new g(),l.stats=l.queue.stats,'html5'===this.request('predict-runtime-type')?(o=f.Deferred(),this.placeholder=q=new k('Placeholder'),q.connectRuntime({runtimeOrder:'html5'},function(){l._ruid=q.getRuid(),o.resolve()}),o.promise()):void 0},_wrapFile:function(e){if(!(e instanceof d)){if(!(e instanceof h)){if(!this._ruid){throw new Error("Can't add external files.")}e=new h(this._ruid,e)}e=new d(e)}return e},acceptFile:function(e){var i=!e||!e.size||this.accept&&l.exec(e.name)&&!this.accept.test(e.name);return !i},_addFile:function(e){var i=this;return e=i._wrapFile(e),i.owner.trigger('beforeFileQueued',e)?i.acceptFile(e)?(i.queue.append(e),i.owner.trigger('fileQueued',e),e):(i.owner.trigger('error','Q_TYPE_DENIED',e),void 0):void 0},getFile:function(e){return this.queue.getFile(e)},addFile:function(e){var l=this;e.length||(e=[e]),e=i.map(e,function(i){return l._addFile(i)}),e.length&&(l.owner.trigger('filesQueued',e),l.options.auto&&setTimeout(function(){l.request('start-upload')},20))},getStats:function(){return this.stats},removeFile:function(e,i){var l=this;e=e.id?e:l.queue.getFile(e),this.request('cancel-file',e),i&&this.queue.removeFile(e)},getFiles:function(){return this.queue.getFiles.apply(this.queue,arguments)},fetchFile:function(){return this.queue.fetch.apply(this.queue,arguments)},retry:function(i,p){var n,l,o,m=this;if(i){return i=i.id?i:m.queue.getFile(i),i.setStatus(e.QUEUED),p||m.request('start-upload'),void 0}for(n=m.queue.getFiles(e.ERROR),l=0,o=n.length;o>l;l++){i=n[l],i.setStatus(e.QUEUED)}m.request('start-upload')},sortFiles:function(){return this.queue.sort.apply(this.queue,arguments)},reset:function(){this.owner.trigger('reset'),this.queue=new g(),this.stats=this.queue.stats},destroy:function(){this.reset(),this.placeholder&&this.placeholder.destroy()}})}),a('widgets/runtime',['uploader','runtime/runtime','widgets/widget'],function(e,d){return e.support=function(){return d.hasRuntime.apply(d,arguments)},e.register({name:'runtime',init:function(){if(!this.predictRuntimeType()){throw Error('Runtime Error')}},predictRuntimeType:function(){var f,i,g=this.options.runtimeOrder||d.orders,h=this.type;if(!h){for(g=g.split(/\s*,\s*/g),f=0,i=g.length;i>f;f++){if(d.hasRuntime(g[f])){this.type=h=g[f];break}}}return h}})}),a('lib/transport',['base','runtime/client','mediator'],function(f,g,h){function d(i){var j=this;i=j.options=e.extend(!0,{},d.options,i||{}),g.call(this,'Transport'),this._blob=null,this._formData=i.formData||{},this._headers=i.headers||{},this.on('progress',this._timeout),this.on('load error',function(){j.trigger('progress',1),clearTimeout(j._timer)})}var e=f.$;return d.options={server:'',method:'POST',withCredentials:!1,fileVal:'file',timeout:120000,formData:{},headers:{},sendAsBinary:!1},e.extend(d.prototype,{appendBlob:function(j,i,k){var d=this,e=d.options;d.getRuid()&&d.disconnectRuntime(),d.connectRuntime(i.ruid,function(){d.exec('init')}),d._blob=i,e.fileVal=j||e.fileVal,e.filename=k||e.filename},append:function(d,i){'object'==typeof d?e.extend(this._formData,d):this._formData[d]=i},setRequestHeader:function(d,i){'object'==typeof d?e.extend(this._headers,d):this._headers[d]=i},send:function(d){this.exec('send',d),this._timeout()},abort:function(){return clearTimeout(this._timer),this.exec('abort')},destroy:function(){this.trigger('destroy'),this.off(),this.exec('destroy'),this.disconnectRuntime()},getResponseHeaders:function(){return this.exec('getResponseHeaders')},getResponse:function(){return this.exec('getResponse')},getResponseAsJson:function(){return this.exec('getResponseAsJson')},getStatus:function(){return this.exec('getStatus')},_timeout:function(){var d=this,e=d.options.timeout;e&&(clearTimeout(d._timer),d._timer=setTimeout(function(){d.abort(),d.trigger('error','timeout')},e))}}),h.installTo(d.prototype),d}),a('widgets/upload',['base','uploader','file','lib/transport','widgets/widget'],function(g,h,j,k){function e(e,f){var m,n,d=[],q=e.source,i=q.size,o=f?Math.ceil(i/f):1,l=0,p=0;for(n={file:e,has:function(){return !!d.length},shift:function(){return d.shift()},unshift:function(i){d.unshift(i)}};o>p;){m=Math.min(f,i-l),d.push({file:e,start:l,end:f?l+m:i,total:i,chunks:o,chunk:p++,cuted:n}),l+=m}return e.blocks=d.concat(),e.remaning=d.length,n}var f=g.$,i=g.isPromise,d=j.Status;f.extend(h.options,{prepareNextFile:!1,chunked:!1,chunkSize:5242880,chunkRetry:2,chunkRetryDelay:1000,threads:3,formData:{}}),h.register({name:'upload',init:function(){var d=this.owner,e=this;this.runing=!1,this.progress=!1,d.on('startUpload',function(){e.progress=!0}).on('uploadFinished',function(){e.progress=!1}),this.pool=[],this.stack=[],this.pending=[],this.remaning=0,this.__tick=g.bindFn(this._tick,this),d.on('uploadComplete',function(d){d.blocks&&f.each(d.blocks,function(f,e){e.transport&&(e.transport.abort(),e.transport.destroy()),delete e.transport}),delete d.blocks,delete d.remaning})},reset:function(){this.request('stop-upload',!0),this.runing=!1,this.pool=[],this.stack=[],this.pending=[],this.remaning=0,this._trigged=!1,this._promise=null},startUpload:function(i){var e=this;if(f.each(e.request('get-files',d.INVALID),function(){e.request('remove-file',this)}),i?(i=i.id?i:e.request('get-file',i),i.getStatus()===d.INTERRUPT?(i.setStatus(d.QUEUED),f.each(e.pool,function(f,e){e.file===i&&(e.transport&&e.transport.send(),i.setStatus(d.PROGRESS))})):i.getStatus()!==d.PROGRESS&&i.setStatus(d.QUEUED)):f.each(e.request('get-files',[d.INITED]),function(){this.setStatus(d.QUEUED)}),e.runing){return e.owner.trigger('startUpload',i),g.nextTick(e.__tick)}e.runing=!0;var l=[];i||f.each(e.pool,function(n,f){var m=f.file;m.getStatus()===d.INTERRUPT&&(e._trigged=!1,l.push(m),f.transport&&f.transport.send())}),f.each(l,function(){this.setStatus(d.PROGRESS)}),i||f.each(e.request('get-files',d.INTERRUPT),function(){this.setStatus(d.PROGRESS)}),e._trigged=!1,g.nextTick(e.__tick),e.owner.trigger('startUpload')},stopUpload:function(e,l){var i=this;if(e===!0&&(l=e,e=null),i.runing!==!1){if(e){if(e=e.id?e:i.request('get-file',e),e.getStatus()!==d.PROGRESS&&e.getStatus()!==d.QUEUED){return}return e.setStatus(d.INTERRUPT),f.each(i.pool,function(f,d){d.file===e&&(d.transport&&d.transport.abort(),l&&(i._putback(d),i._popBlock(d)))}),i.owner.trigger('stopUpload',e),g.nextTick(i.__tick)}i.runing=!1,this._promise&&this._promise.file&&this._promise.file.setStatus(d.INTERRUPT),l&&f.each(i.pool,function(i,f){f.transport&&f.transport.abort(),f.file.setStatus(d.INTERRUPT)}),i.owner.trigger('stopUpload')}},cancelFile:function(e){e=e.id?e:this.request('get-file',e),e.blocks&&f.each(e.blocks,function(i,f){var d=f.transport;d&&(d.abort(),d.destroy(),delete f.transport)}),e.setStatus(d.CANCELLED),this.owner.trigger('fileDequeued',e)},isInProgress:function(){return !!this.progress},_getStats:function(){return this.request('get-stats')},skipFile:function(e,i){e=e.id?e:this.request('get-file',e),e.setStatus(i||d.COMPLETE),e.skipped=!0,e.blocks&&f.each(e.blocks,function(l,f){var d=f.transport;d&&(d.abort(),d.destroy(),delete f.transport)}),this.owner.trigger('uploadSkip',e)},_tick:function(){var f,e,d=this,l=d.options;return d._promise?d._promise.always(d.__tick):(d.pool.length<l.threads&&(e=d._nextBlock())?(d._trigged=!1,f=function(e){d._promise=null,e&&e.file&&d._startSend(e),g.nextTick(d.__tick)},d._promise=i(e)?e.always(f):f(e)):d.remaning||d._getStats().numOfQueue||d._getStats().numofInterrupt||(d.runing=!1,d._trigged||g.nextTick(function(){d.owner.trigger('uploadFinished')}),d._trigged=!0),void 0)},_putback:function(d){var e;d.cuted.unshift(d),e=this.stack.indexOf(d.cuted),~e||this.stack.unshift(d.cuted)},_getStack:function(){for(var e,f=0;e=this.stack[f++];){if(e.has()&&e.file.getStatus()===d.PROGRESS){return e}(!e.has()||e.file.getStatus()!==d.PROGRESS&&e.file.getStatus()!==d.INTERRUPT)&&this.stack.splice(--f,1)}return null},_nextBlock:function(){var l,d,m,o,f=this,n=f.options;return (l=this._getStack())?(n.prepareNextFile&&!f.pending.length&&f._prepareNextFile(),l.shift()):f.runing?(!f.pending.length&&f._getStats().numOfQueue&&f._prepareNextFile(),d=f.pending.shift(),m=function(d){return d?(l=e(d,n.chunked?n.chunkSize:0),f.stack.push(l),l.shift()):null},i(d)?(o=d.file,d=d[d.pipe?'pipe':'then'](m),d.file=o,d):m(d)):void 0},_prepareNextFile:function(){var l,i=this,e=i.request('fetch-file'),m=i.pending;e&&(l=i.request('before-send-file',e,function(){return e.getStatus()===d.PROGRESS||e.getStatus()===d.INTERRUPT?e:i._finishFile(e)}),i.owner.trigger('uploadStart',e),e.setStatus(d.PROGRESS),l.file=e,l.done(function(){var d=f.inArray(l,m);~d&&m.splice(d,1,e)}),l.fail(function(f){e.setStatus(d.ERROR,f),i.owner.trigger('uploadError',e,f),i.owner.trigger('uploadComplete',e)}),m.push(l))},_popBlock:function(d){var e=f.inArray(d,this.pool);this.pool.splice(e,1),d.file.remaning--,this.remaning--},_startSend:function(e){var l,f=this,i=e.file;return i.getStatus()!==d.PROGRESS?(i.getStatus()===d.INTERRUPT&&f._putback(e),void 0):(f.pool.push(e),f.remaning++,e.blob=1===e.chunks?i.source:i.source.slice(e.start,e.end),l=f.request('before-send',e,function(){i.getStatus()===d.PROGRESS?f._doSend(e):(f._popBlock(e),g.nextTick(f.__tick))}),l.fail(function(){1===i.remaning?f._finishFile(i).always(function(){e.percentage=1,f._popBlock(e),f.owner.trigger('uploadComplete',i),g.nextTick(f.__tick)}):(e.percentage=1,f.updateFileProgress(i),f._popBlock(e),g.nextTick(f.__tick))}),void 0)},_doSend:function(e){var r,n,m=this,q=m.owner,o=f.extend({},m.options,e.options),l=e.file,i=new k(o),p=f.extend({},o.formData),s=f.extend({},o.headers);e.transport=i,i.on('destroy',function(){delete e.transport,m._popBlock(e),g.nextTick(m.__tick)}),i.on('progress',function(d){e.percentage=d,m.updateFileProgress(l)}),r=function(d){var f;return n=i.getResponseAsJson()||{},n._raw=i.getResponse(),n._headers=i.getResponseHeaders(),e.response=n,f=function(f){d=f},q.trigger('uploadAccept',e,n,f)||(d=d||'server'),d},i.on('error',function(f,n){e.retried=e.retried||0,e.chunks>1&&~'http,abort,server'.indexOf(f.replace(/-.*/,''))&&e.retried<o.chunkRetry?(e.retried++,m.retryTimer=setTimeout(function(){i.send()},o.chunkRetryDelay||1000)):(n||'server'!==f||(f=r(f)),l.setStatus(d.ERROR,f),q.trigger('uploadError',l,f),q.trigger('uploadComplete',l))}),i.on('load',function(){var d;return (d=r())?(i.trigger('error',d,!0),void 0):(1===l.remaning?m._finishFile(l,n):i.destroy(),void 0)}),p=f.extend(p,{id:l.id,name:l.name,type:l.type,lastModifiedDate:l.lastModifiedDate,size:l.size}),e.chunks>1&&f.extend(p,{chunks:e.chunks,chunk:e.chunk}),q.trigger('uploadBeforeSend',e,p,s),i.appendBlob(o.fileVal,e.blob,l.name),i.append(p),i.setRequestHeader(s),i.send()},_finishFile:function(e,i,l){var f=this.owner;return f.request('after-send-file',arguments,function(){e.setStatus(d.COMPLETE),f.trigger('uploadSuccess',e,i,l)}).fail(function(m){e.getStatus()===d.PROGRESS&&e.setStatus(d.ERROR,m),f.trigger('uploadError',e,m)}).always(function(){f.trigger('uploadComplete',e)})},updateFileProgress:function(d){var e=0,i=0;d.blocks&&(f.each(d.blocks,function(f,e){i+=(e.percentage||0)*(e.end-e.start)}),e=i/d.size,this.owner.trigger('uploadProgress',d,e||0))},destroy:function(){clearTimeout(this.retryTimer)}})}),a('widgets/validator',['base','uploader','file','widgets/widget'],function(f,g,h){var d,i=f.$,e={};return d={addValidator:function(d,i){e[d]=i},removeValidator:function(d){delete e[d]}},g.register({name:'validator',init:function(){var d=this;f.nextTick(function(){i.each(e,function(){this.call(d.owner)})})}}),d.addValidator('fileNumLimit',function(){var e=this,k=e.options,d=0,i=parseInt(k.fileNumLimit,10),j=!0;i&&(e.on('beforeFileQueued',function(e){return this.trigger('beforeFileQueuedCheckfileNumLimit',e,d)?(d>=i&&j&&(j=!1,this.trigger('error','Q_EXCEED_NUM_LIMIT',i,e),setTimeout(function(){j=!0},1)),d>=i?!1:!0):!1}),e.on('fileQueued',function(){d++}),e.on('fileDequeued',function(){d--}),e.on('reset',function(){d=0}))}),d.addValidator('fileSizeLimit',function(){var d=this,k=d.options,e=0,i=parseInt(k.fileSizeLimit,10),j=!0;i&&(d.on('beforeFileQueued',function(d){var k=e+d.size>i;return k&&j&&(j=!1,this.trigger('error','Q_EXCEED_SIZE_LIMIT',i,d),setTimeout(function(){j=!0},1)),k?!1:!0}),d.on('fileQueued',function(d){e+=d.size}),d.on('fileDequeued',function(d){e-=d.size}),d.on('reset',function(){e=0}))}),d.addValidator('fileSingleSizeLimit',function(){var e=this,i=e.options,d=i.fileSingleSizeLimit;d&&e.on('beforeFileQueued',function(e){return e.size>d?(e.setStatus(h.Status.INVALID,'exceed_size'),this.trigger('error','F_EXCEED_SIZE',d,e),!1):void 0})}),d.addValidator('duplicate',function(){function a(i){for(var j,d=0,e=0,k=i.length;k>e;e++){j=i.charCodeAt(e),d=j+(d<<6)+(d<<16)-d}return d}var d=this,i=d.options,e={};i.duplicate||(d.on('beforeFileQueued',function(d){var i=d.__hash||(d.__hash=a(d.name+d.size+d.lastModifiedDate));return e[i]?(this.trigger('error','F_DUPLICATE',d),!1):void 0}),d.on('fileQueued',function(i){var d=i.__hash;d&&(e[d]=!0)}),d.on('fileDequeued',function(i){var d=i.__hash;d&&delete e[d]}),d.on('reset',function(){e={}}))}),d}),a('lib/md5',['runtime/client','mediator'],function(d,e){function c(){d.call(this,'Md5')}return e.installTo(c.prototype),c.prototype.loadFromBlob=function(g){var f=this;f.getRuid()&&f.disconnectRuntime(),f.connectRuntime(g.ruid,function(){f.exec('init'),f.exec('loadFromBlob',g)})},c.prototype.getResult=function(){return this.exec('getResult')},c}),a('widgets/md5',['base','uploader','lib/md5','lib/blob','widgets/widget'],function(d,e,f,g){return e.register({name:'md5',md5File:function(m,i,h){var k=new f(),l=d.Deferred(),j=m instanceof g?m:this.request('get-file',m).source;return k.on('progress load',function(j){j=j||{},l.notify(j.total?j.loaded/j.total:1)}),k.on('complete',function(){l.resolve(k.getResult())}),k.on('error',function(j){l.reject(j)}),arguments.length>1&&(i=i||0,h=h||0,0>i&&(i=j.size+i),0>h&&(h=j.size+h),h=Math.min(h,j.size),j=j.slice(i,h)),k.loadFromBlob(j),l.promise()}})}),a('runtime/compbase',[],function(){function a(d,e){this.owner=d,this.options=d.options,this.getRuntime=function(){return e},this.getRuid=function(){return e.uid},this.trigger=function(){return d.trigger.apply(d,arguments)}}return a}),a('runtime/html5/runtime',['base','runtime/runtime','runtime/compbase'],function(d,f,i){function e(){var j={},e=this,k=this.destroy;f.apply(e,arguments),e.type=h,e.exec=function(k,l){var h,m=this,n=m.uid,o=d.slice(arguments,2);return g[k]&&(h=j[n]=j[n]||new g[k](m,e),h[l])?h[l].apply(h,o):void 0},e.destroy=function(){return k&&k.apply(this,arguments)}}var h='html5',g={};return d.inherits(f,{constructor:e,init:function(){var e=this;setTimeout(function(){e.trigger('ready')},1)}}),e.register=function(e,h){var j=g[e]=d.inherits(i,h);return j},b.Blob&&b.FileReader&&b.DataView&&f.addRuntime(h,e),e}),a('runtime/html5/blob',['runtime/html5/runtime','lib/blob'],function(d,e){return d.register('Blob',{slice:function(g,h){var f=this.owner.source,i=f.slice||f.webkitSlice||f.mozSlice;return f=i.call(f,g,h),new e(this.getRuid(),f)}})}),a('runtime/html5/dnd',['base','runtime/html5/runtime','lib/file'],function(d,g,h){var e=d.$,f='webuploader-dnd-';return g.register('DragAndDrop',{init:function(){var f=this.elem=this.options.container;this.dragEnterHandler=d.bindFn(this._dragEnterHandler,this),this.dragOverHandler=d.bindFn(this._dragOverHandler,this),this.dragLeaveHandler=d.bindFn(this._dragLeaveHandler,this),this.dropHandler=d.bindFn(this._dropHandler,this),this.dndOver=!1,f.on('dragenter',this.dragEnterHandler),f.on('dragover',this.dragOverHandler),f.on('dragleave',this.dragLeaveHandler),f.on('drop',this.dropHandler),this.options.disableGlobalDnd&&(e(document).on('dragover',this.dragOverHandler),e(document).on('drop',this.dropHandler))},_dragEnterHandler:function(i){var j,e=this,k=e._denied||!1;return i=i.originalEvent||i,e.dndOver||(e.dndOver=!0,j=i.dataTransfer.items,j&&j.length&&(e._denied=k=!e.trigger('accept',j)),e.elem.addClass(f+'over'),e.elem[k?'addClass':'removeClass'](f+'denied')),i.dataTransfer.dropEffect=k?'none':'copy',!1},_dragOverHandler:function(f){var i=this.elem.parent().get(0);return i&&!e.contains(i,f.currentTarget)?!1:(clearTimeout(this._leaveTimer),this._dragEnterHandler.call(this,f),!1)},_dragLeaveHandler:function(){var i,e=this;return i=function(){e.dndOver=!1,e.elem.removeClass(f+'over '+f+'denied')},clearTimeout(e._leaveTimer),e._leaveTimer=setTimeout(i,100),!1},_dropHandler:function(j){var k,l,i=this,n=i.getRuid(),m=i.elem.parent().get(0);if(m&&!e.contains(m,j.currentTarget)){return !1}j=j.originalEvent||j,k=j.dataTransfer;try{l=k.getData('text/html')}catch(o){}return i.dndOver=!1,i.elem.removeClass(f+'over'),k&&!l?(i._getTansferFiles(k,function(f){i.trigger('drop',e.map(f,function(e){return new h(n,e)}))}),!1):void 0},_getTansferFiles:function(l,q){var e,j,m,k,f,n,o,i=[],p=[];for(e=l.items,j=l.files,o=!(!e||!e[0].webkitGetAsEntry),f=0,n=j.length;n>f;f++){m=j[f],k=e&&e[f],o&&k.webkitGetAsEntry().isDirectory?p.push(this._traverseDirectoryTree(k.webkitGetAsEntry(),i)):i.push(m)}d.when.apply(d,p).done(function(){i.length&&q(i)})},_traverseDirectoryTree:function(e,i){var f=d.Deferred(),j=this;return e.isFile?e.file(function(j){i.push(j),f.resolve()}):e.isDirectory&&e.createReader().readEntries(function(l){var k,o=l.length,m=[],n=[];for(k=0;o>k;k++){m.push(j._traverseDirectoryTree(l[k],n))}d.when.apply(d,m).then(function(){i.push.apply(i,n),f.resolve()},f.reject)}),f.promise()},destroy:function(){var f=this.elem;f&&(f.off('dragenter',this.dragEnterHandler),f.off('dragover',this.dragOverHandler),f.off('dragleave',this.dragLeaveHandler),f.off('drop',this.dropHandler),this.options.disableGlobalDnd&&(e(document).off('dragover',this.dragOverHandler),e(document).off('drop',this.dropHandler)))}})}),a('runtime/html5/filepaste',['base','runtime/html5/runtime','lib/file'],function(d,e,f){return e.register('FilePaste',{init:function(){var h,i,l,k,j=this.options,m=this.elem=j.container,g='.*';if(j.accept){for(h=[],i=0,l=j.accept.length;l>i;i++){k=j.accept[i].mimeTypes,k&&h.push(k)}h.length&&(g=h.join(','),g=g.replace(/,/g,'|').replace(/\*/g,'.*'))}this.accept=g=new RegExp(g,'i'),this.hander=d.bindFn(this._pasteHander,this),m.on('paste',this.hander)},_pasteHander:function(g){var i,j,l,h,m,k=[],n=this.getRuid();for(g=g.originalEvent||g,i=g.clipboardData.items,h=0,m=i.length;m>h;h++){j=i[h],'file'===j.kind&&(l=j.getAsFile())&&k.push(new f(n,l))}k.length&&(g.preventDefault(),g.stopPropagation(),this.trigger('paste',k))},destroy:function(){this.elem.off('paste',this.hander)}})}),a('runtime/html5/filepicker',['base','runtime/html5/runtime'],function(e,f){var d=e.$;return f.register('FilePicker',{init:function(){var k,i,p,l,m,q=this.getRuntime().getContainer(),n=this,o=n.owner,h=n.options,j=this.label=d(document.createElement('label')),g=this.input=d(document.createElement('input'));if(g.attr('type','file'),g.attr('capture','camera'),g.attr('name',h.name),g.addClass('webuploader-element-invisible'),j.on('click',function(d){g.trigger('click'),d.stopPropagation(),o.trigger('dialogopen')}),j.css({opacity:0,width:'100%',height:'100%',display:'block',cursor:'pointer',background:'#ffffff'}),h.multiple&&g.attr('multiple','multiple'),h.accept&&h.accept.length>0){for(k=[],i=0,p=h.accept.length;p>i;i++){k.push(h.accept[i].mimeTypes)}g.attr('accept',k.join(','))}q.append(g),q.append(j),l=function(d){o.trigger(d.type)},m=function(i){var h;return 0===i.target.files.length?!1:(n.files=i.target.files,h=this.cloneNode(!0),h.value=null,this.parentNode.replaceChild(h,this),g.off(),g=d(h).on('change',m).on('mouseenter mouseleave',l),o.trigger('change'),void 0)},g.on('change',m),j.on('mouseenter mouseleave',l)},getFiles:function(){return this.files},destroy:function(){this.input.off(),this.label.off()}})}),a('runtime/html5/util',['base'],function(g){var d=b.createObjectURL&&b||b.URL&&URL.revokeObjectURL&&URL||b.webkitURL,e=g.noop,f=e;return d&&(e=function(){return d.createObjectURL.apply(d,arguments)},f=function(){return d.revokeObjectURL.apply(d,arguments)}),{createObjectURL:e,revokeObjectURL:f,dataURL2Blob:function(k){var f,i,h,d,j,e;for(e=k.split(','),f=~e[0].indexOf('base64')?atob(e[1]):decodeURIComponent(e[1]),h=new ArrayBuffer(f.length),i=new Uint8Array(h),d=0;d<f.length;d++){i[d]=f.charCodeAt(d)}return j=e[0].split(':')[1].split(';')[0],this.arrayBufferToBlob(h,j)},dataURL2ArrayBuffer:function(i){var e,h,d,f;for(f=i.split(','),e=~f[0].indexOf('base64')?atob(f[1]):decodeURIComponent(f[1]),h=new Uint8Array(e.length),d=0;d<e.length;d++){h[d]=e.charCodeAt(d)}return h.buffer},arrayBufferToBlob:function(f,d){var e,h=b.BlobBuilder||b.WebKitBlobBuilder;return h?(e=new h(),e.append(f),e.getBlob(d)):new Blob([f],d?{type:d}:{})},canvasToDataUrl:function(d,e,f){return d.toDataURL(e,f/100)},parseMeta:function(e,d){d(!1,{})},updateImageHead:function(d){return d}}}),a('runtime/html5/imagemeta',['runtime/html5/util'],function(e){var d;return d={parsers:{65505:[]},maxMetaDataSize:262144,parse:function(f,g){var h=this,d=new FileReader();d.onload=function(){g(!1,h._parse(this.result)),d=d.onload=d.onerror=null},d.onerror=function(h){g(h.message),d=d.onload=d.onerror=null},f=f.slice(0,h.maxMetaDataSize),d.readAsArrayBuffer(f.getSource())},_parse:function(h,o){if(!(h.byteLength<6)){var i,j,k,l,g=new DataView(h),f=2,p=g.byteLength-4,m=f,n={};if(65496===g.getUint16(0)){for(;p>f&&(i=g.getUint16(f),i>=65504&&65519>=i||65534===i)&&(j=g.getUint16(f+2)+2,!(f+j>g.byteLength));){if(k=d.parsers[i],!o&&k){for(l=0;l<k.length;l+=1){k[l].call(d,g,f,j,n)}}f+=j,m=f}m>6&&(n.imageHead=h.slice?h.slice(2,m):(new Uint8Array(h)).subarray(2,m))}return n}},updateImageHead:function(f,h){var d,i,g,j=this._parse(f,!0);return g=2,j.imageHead&&(g=2+j.imageHead.byteLength),i=f.slice?f.slice(g):(new Uint8Array(f)).subarray(g),d=new Uint8Array(h.byteLength+2+i.byteLength),d[0]=255,d[1]=216,d.set(new Uint8Array(h),2),d.set(new Uint8Array(i),h.byteLength+2),d.buffer}},e.parseMeta=function(){return d.parse.apply(d,arguments)},e.updateImageHead=function(){return d.updateImageHead.apply(d,arguments)},d}),a('runtime/html5/imagemeta/exif',['base','runtime/html5/imagemeta'],function(e,f){var d={};return d.ExifMap=function(){return this},d.ExifMap.prototype.map={Orientation:274},d.ExifMap.prototype.get=function(d){return this[d]||this[this.map[d]]},d.exifTagTypes={1:{getValue:function(d,g){return d.getUint8(g)},size:1},2:{getValue:function(d,g){return String.fromCharCode(d.getUint8(g))},size:1,ascii:!0},3:{getValue:function(d,g,h){return d.getUint16(g,h)},size:2},4:{getValue:function(d,g,h){return d.getUint32(g,h)},size:4},5:{getValue:function(d,g,h){return d.getUint32(g,h)/d.getUint32(g+4,h)},size:8},9:{getValue:function(d,g,h){return d.getInt32(g,h)},size:4},10:{getValue:function(d,g,h){return d.getInt32(g,h)/d.getInt32(g+4,h)},size:8}},d.exifTagTypes[7]=d.exifTagTypes[1],d.getExifValue=function(j,r,q,s,l,m){var n,k,i,g,o,p,h=d.exifTagTypes[s];if(!h){return e.log('Invalid Exif data: Invalid tag type.'),void 0}if(n=h.size*l,k=n>4?r+j.getUint32(q+8,m):q+8,k+n>j.byteLength){return e.log('Invalid Exif data: Invalid data offset.'),void 0}if(1===l){return h.getValue(j,k,m)}for(i=[],g=0;l>g;g+=1){i[g]=h.getValue(j,k+g*h.size,m)}if(h.ascii){for(o='',g=0;g<i.length&&(p=i[g],'\x00'!==p);g+=1){o+=p}return o}return i},d.parseExifTag=function(g,j,h,i,k){var l=g.getUint16(h,i);k.exif[l]=d.getExifValue(g,j,h,g.getUint16(h+2,i),g.getUint32(h+4,i),i)},d.parseExifTags=function(d,l,g,i,m){var j,k,h;if(g+6>d.byteLength){return e.log('Invalid Exif data: Invalid directory offset.'),void 0}if(j=d.getUint16(g,i),k=g+2+12*j,k+4>d.byteLength){return e.log('Invalid Exif data: Invalid directory size.'),void 0}for(h=0;j>h;h+=1){this.parseExifTag(d,l,g+2+12*h,i,m)}return d.getUint32(k,i)},d.parseExifData=function(g,j,m,l){var i,k,h=j+10;if(1165519206===g.getUint32(j+4)){if(h+8>g.byteLength){return e.log('Invalid Exif data: Invalid segment size.'),void 0}if(0!==g.getUint16(j+8)){return e.log('Invalid Exif data: Missing byte alignment offset.'),void 0}switch(g.getUint16(h)){case 18761:i=!0;break;case 19789:i=!1;break;default:return e.log('Invalid Exif data: Invalid byte alignment marker.'),void 0;}if(42!==g.getUint16(h+2,i)){return e.log('Invalid Exif data: Missing TIFF marker.'),void 0}k=g.getUint32(h+4,i),l.exif=new d.ExifMap(),k=d.parseExifTags(g,h,h+k,i,l)}},f.parsers[65505].push(d.parseExifData),d}),a('runtime/html5/jpegencoder',[],function(){function a(D){function b(l){for(var m=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],g=0;64>g;g++){var d=Y((m[g]*l+50)/100);1>d?d=1:d>255&&(d=255),G[y[g]]=d}for(var n=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],h=0;64>h;h++){var e=Y((n[h]*l+50)/100);1>e?e=1:e>255&&(e=255),B[y[h]]=e}for(var i=[1,1.387039845,1.306562965,1.175875602,1,0.785694958,0.5411961,0.275899379],f=0,j=0;8>j;j++){for(var k=0;8>k;k++){H[f]=1/(8*G[y[f]]*i[j]*i[k]),C[f]=1/(8*B[y[f]]*i[j]*i[k]),f++}}}function c(j,g){for(var h=0,d=0,e=new Array(),f=1;16>=f;f++){for(var i=1;i<=j[f];i++){e[g[d]]=[],e[g[d]][0]=h,e[g[d]][1]=f,d++,h++}h*=2}return e}function d(){V=c(N,O),E=c(R,S),W=c(P,Q),F=c(T,U)}function e(){for(var h=1,g=2,f=1;15>=f;f++){for(var d=h;g>d;d++){z[32767+d]=f,v[32767+d]=[],v[32767+d][1]=f,v[32767+d][0]=d}for(var e=-(g-1);-h>=e;e++){z[32767+e]=f,v[32767+e]=[],v[32767+e][1]=f,v[32767+e][0]=g-1+e}h<<=1,g<<=1}}function f(){for(var d=0;256>d;d++){t[d]=19595*d,t[d+256>>0]=38470*d,t[d+512>>0]=7471*d+32768,t[d+768>>0]=-11059*d,t[d+1024>>0]=-21709*d,t[d+1280>>0]=32768*d+8421375,t[d+1536>>0]=-27439*d,t[d+1792>>0]=-5329*d}}function g(e){for(var f=e[0],d=e[1]-1;d>=0;){f&1<<d&&(x|=1<<u),d--,u--,0>u&&(255==x?(h(255),h(0)):h(x),u=7,x=0)}}function h(d){A.push(M[d])}function i(d){h(255&d>>8),h(255&d)}function j(e,ab){var g,h,i,j,k,l,m,n,f,d=0,V=8,ac=64;for(f=0;V>f;++f){g=e[d],h=e[d+1],i=e[d+2],j=e[d+3],k=e[d+4],l=e[d+5],m=e[d+6],n=e[d+7];var W=g+n,x=g-n,X=h+m,Y=h-m,Z=i+l,$=i-l,_=j+k,ad=j-k,p=W+_,y=W-_,t=X+Z,u=X-Z;e[d]=p+t,e[d+4]=p-t;var A=0.707106781*(u+y);e[d+2]=y+A,e[d+6]=y-A,p=ad+$,t=$+Y,u=Y+x;var B=0.382683433*(p-u),C=0.5411961*p+B,E=1.306562965*u+B,F=0.707106781*t,G=x+F,H=x-F;e[d+5]=H+C,e[d+3]=H-C,e[d+1]=G+E,e[d+7]=G-E,d+=8}for(d=0,f=0;V>f;++f){g=e[d],h=e[d+8],i=e[d+16],j=e[d+24],k=e[d+32],l=e[d+40],m=e[d+48],n=e[d+56];var J=g+n,v=g-n,K=h+m,L=h-m,M=i+l,N=i-l,O=j+k,aa=j-k,o=J+O,w=J-O,q=K+M,r=K-M;e[d]=o+q,e[d+32]=o-q;var P=0.707106781*(r+w);e[d+16]=w+P,e[d+48]=w-P,o=aa+N,q=N+L,r=L+v;var Q=0.382683433*(o-r),R=0.5411961*o+Q,S=1.306562965*r+Q,T=0.707106781*q,U=v+T,z=v-T;e[d+40]=z+R,e[d+24]=z-R,e[d+8]=U+S,e[d+56]=U-S,d++}var s;for(f=0;ac>f;++f){s=e[f]*ab[f],I[f]=s>0?0|s+0.5:0|s-0.5}return I}function k(){i(65504),i(16),h(74),h(70),h(73),h(70),h(0),h(1),h(1),h(0),i(1),i(1),h(0),h(0)}function l(d,e){i(65472),i(17),h(8),i(e),i(d),h(3),h(1),h(17),h(0),h(2),h(17),h(1),h(3),h(17),h(1)}function m(){i(65499),i(132),h(0);for(var d=0;64>d;d++){h(G[d])}h(1);for(var e=0;64>e;e++){h(B[e])}}function n(){i(65476),i(418),h(0);for(var d=0;16>d;d++){h(N[d+1])}for(var e=0;11>=e;e++){h(O[e])}h(16);for(var f=0;16>f;f++){h(P[f+1])}for(var g=0;161>=g;g++){h(Q[g])}h(1);for(var j=0;16>j;j++){h(R[j+1])}for(var k=0;11>=k;k++){h(S[k])}h(17);for(var l=0;16>l;l++){h(T[l+1])}for(var m=0;161>=m;m++){h(U[m])}}function o(){i(65498),i(12),h(3),h(1),h(0),h(2),h(17),h(3),h(17),h(0),h(63),h(0)}function p(r,s,i,m,l){for(var f,n=l[0],t=l[240],u=16,x=63,A=64,B=j(r,s),k=0;A>k;++k){w[y[k]]=B[k]}var o=w[0]-i;i=w[0],0==o?g(m[0]):(f=32767+o,g(m[z[f]]),g(v[f]));for(var e=63;e>0&&0==w[e];e--){}if(0==e){return g(n),i}for(var p,d=1;e>=d;){for(var C=d;0==w[d]&&e>=d;++d){}var h=d-C;if(h>=u){p=h>>4;for(var q=1;p>=q;++q){g(t)}h=15&h}f=32767+w[d],g(l[(h<<4)+z[f]]),g(v[f]),d++}return e!=x&&g(n),i}function q(){for(var e=String.fromCharCode,d=0;256>d;d++){M[d]=e(d)}}function r(d){if(0>=d&&(d=1),d>100&&(d=100),X!=d){var e=0;e=50>d?Math.floor(5000/d):Math.floor(200-2*d),b(e),X=d}}function s(){D||(D=50),q(),d(),e(),f(),r(D)}Math.round;var V,E,W,F,X,Y=Math.floor,G=new Array(64),B=new Array(64),H=new Array(64),C=new Array(64),v=new Array(65535),z=new Array(65535),I=new Array(64),w=new Array(64),A=[],x=0,u=7,J=new Array(64),K=new Array(64),L=new Array(64),M=new Array(256),t=new Array(2048),y=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],N=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],O=[0,1,2,3,4,5,6,7,8,9,10,11],P=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],Q=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],R=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],S=[0,1,2,3,4,5,6,7,8,9,10,11],T=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],U=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];this.encode=function(q,N){N&&r(N),A=new Array(),x=0,u=7,i(65496),k(),m(),l(q.width,q.height),n(),o();var O=0,P=0,Q=0;x=0,u=7,this.encode.displayName='_encode_';for(var h,w,y,z,M,e,s,v,d,B=q.data,R=q.width,G=q.height,f=4*R,j=0;G>j;){for(h=0;f>h;){for(M=f*j+h,e=M,s=-1,v=0,d=0;64>d;d++){v=d>>3,s=4*(7&d),e=M+v*f+s,j+v>=G&&(e-=f*(j+1+v-G)),h+s>=f&&(e-=h+s-f+4),w=B[e++],y=B[e++],z=B[e++],J[d]=(t[w]+t[y+256>>0]+t[z+512>>0]>>16)-128,K[d]=(t[w+768>>0]+t[y+1024>>0]+t[z+1280>>0]>>16)-128,L[d]=(t[w+1280>>0]+t[y+1536>>0]+t[z+1792>>0]>>16)-128}O=p(J,H,O,V,W),P=p(K,C,P,E,F),Q=p(L,C,Q,E,F),h+=32}j+=8}if(u>=0){var I=[];I[1]=u+1,I[0]=(1<<u+1)-1,g(I)}i(65497);var S='data:image/jpeg;base64,'+btoa(A.join(''));return A=[],S},s()}return a.encode=function(d,e){var f=new a(e);return f.encode(d)},a}),a('runtime/html5/androidpatch',['runtime/html5/util','runtime/html5/jpegencoder','base'],function(f,g,h){var d,e=f.canvasToDataUrl;f.canvasToDataUrl=function(k,l,p){var m,n,o,i,j;return h.os.android?('image/jpeg'===l&&'undefined'==typeof d&&(i=e.apply(null,arguments),j=i.split(','),i=~j[0].indexOf('base64')?atob(j[1]):decodeURIComponent(j[1]),i=i.substring(0,2),d=255===i.charCodeAt(0)&&216===i.charCodeAt(1)),'image/jpeg'!==l||d?e.apply(null,arguments):(n=k.width,o=k.height,m=k.getContext('2d'),g.encode(m.getImageData(0,0,n,o),p))):e.apply(null,arguments)}}),a('runtime/html5/image',['base','runtime/html5/runtime','runtime/html5/util'],function(e,f,d){var g='data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D';return f.register('Image',{modified:!1,init:function(){var g=this,h=new Image();h.onload=function(){g._info={type:g.type,width:this.width,height:this.height},g._metas||'image/jpeg'!==g.type?g.owner.trigger('load'):d.parseMeta(g._blob,function(i,h){g._metas=h,g.owner.trigger('load')})},h.onerror=function(){g.owner.trigger('error')},g._img=h},loadFromBlob:function(h){var g=this,i=g._img;g._blob=h,g.type=h.type,i.src=d.createObjectURL(h.getSource()),g.owner.once('load',function(){d.revokeObjectURL(i.src)})},resize:function(g,h){var i=this._canvas||(this._canvas=document.createElement('canvas'));this._resize(this._img,i,g,h),this._blob=null,this.modified=!0,this.owner.trigger('complete','resize')},crop:function(j,k,l,m,g){var h=this._canvas||(this._canvas=document.createElement('canvas')),n=this.options,i=this._img,o=i.naturalWidth,p=i.naturalHeight,q=this.getOrientation();g=g||1,h.width=l,h.height=m,n.preserveHeaders||this._rotate2Orientaion(h,q),this._renderImageToCanvas(h,i,-j,-k,o*g,p*g),this._blob=null,this.modified=!0,this.owner.trigger('complete','crop')},getAsBlob:function(h){var i,g=this._blob,j=this.options;if(h=h||this.type,this.modified||this.type!==h){if(i=this._canvas,'image/jpeg'===h){if(g=d.canvasToDataUrl(i,h,j.quality),j.preserveHeaders&&this._metas&&this._metas.imageHead){return g=d.dataURL2ArrayBuffer(g),g=d.updateImageHead(g,this._metas.imageHead),g=d.arrayBufferToBlob(g,h)}}else {g=d.canvasToDataUrl(i,h)}g=d.dataURL2Blob(g)}return g},getAsDataUrl:function(g){var h=this.options;return g=g||this.type,'image/jpeg'===g?d.canvasToDataUrl(this._canvas,g,h.quality):this._canvas.toDataURL(g)},getOrientation:function(){return this._metas&&this._metas.exif&&this._metas.exif.get('Orientation')||1},info:function(g){return g?(this._info=g,this):this._info},meta:function(g){return g?(this._metas=g,this):this._metas},destroy:function(){var h=this._canvas;this._img.onload=null,h&&(h.getContext('2d').clearRect(0,0,h.width,h.height),h.width=h.height=0,this._canvas=null),this._img.src=g,this._img=this._blob=null},_resize:function(n,g,h,i){var j,k,l,o,p,m=this.options,q=n.width,r=n.height,s=this.getOrientation();~[5,6,7,8].indexOf(s)&&(h^=i,i^=h,h^=i),j=Math[m.crop?'max':'min'](h/q,i/r),m.allowMagnify||(j=Math.min(1,j)),k=q*j,l=r*j,m.crop?(g.width=h,g.height=i):(g.width=k,g.height=l),o=(g.width-k)/2,p=(g.height-l)/2,m.preserveHeaders||this._rotate2Orientaion(g,s),this._renderImageToCanvas(g,n,o,p,k,l)},_rotate2Orientaion:function(h,k){var i=h.width,j=h.height,g=h.getContext('2d');switch(k){case 5:case 6:case 7:case 8:h.width=j,h.height=i;}switch(k){case 2:g.translate(i,0),g.scale(-1,1);break;case 3:g.translate(i,j),g.rotate(Math.PI);break;case 4:g.translate(0,j),g.scale(1,-1);break;case 5:g.rotate(0.5*Math.PI),g.scale(1,-1);break;case 6:g.rotate(0.5*Math.PI),g.translate(0,-j);break;case 7:g.rotate(0.5*Math.PI),g.translate(i,-j),g.scale(-1,1);break;case 8:g.rotate(-0.5*Math.PI),g.translate(-i,0);}},_renderImageToCanvas:function(){function b(p,q,h){var l,m,i,j=document.createElement('canvas'),n=j.getContext('2d'),k=0,o=h,g=h;for(j.width=1,j.height=h,n.drawImage(p,0,0),l=n.getImageData(0,0,1,h).data;g>k;){m=l[4*(g-1)+3],0===m?o=g:k=g,g=o+k>>1}return i=g/h,0===i?1:i}function c(h){var g,i,j=h.naturalWidth,k=h.naturalHeight;return j*k>1048576?(g=document.createElement('canvas'),g.width=g.height=1,i=g.getContext('2d'),i.drawImage(h,-j+1,0),0===i.getImageData(0,0,1,1).data[3]):!1}return e.os.ios?e.os.ios>=7?function(k,g,l,m,n,o){var h=g.naturalWidth,i=g.naturalHeight,j=b(g,h,i);return k.getContext('2d').drawImage(g,0,0,h*j,i*j,l,m,n,o)}:function(u,i,v,w,x,y){var h,j,s,n,o,k,p,l=i.naturalWidth,m=i.naturalHeight,q=u.getContext('2d'),z=c(i),A='image/jpeg'===this.type,g=1024,r=0,t=0;for(z&&(l/=2,m/=2),q.save(),h=document.createElement('canvas'),h.width=h.height=g,j=h.getContext('2d'),s=A?b(i,l,m):1,n=Math.ceil(g*x/l),o=Math.ceil(g*y/m/s);m>r;){for(k=0,p=0;l>k;){j.clearRect(0,0,g,g),j.drawImage(i,-k,-r),q.drawImage(h,0,0,g,g,v+p,w+t,n,o),k+=g,p+=n}r+=g,t+=o}q.restore(),h=j=null}:function(h){var i=e.slice(arguments,1),g=h.getContext('2d');g.drawImage.apply(g,i)}}()})}),a('runtime/html5/transport',['base','runtime/html5/runtime'],function(e,g){var d=e.noop,f=e.$;return g.register('Transport',{init:function(){this._status=0,this._response=null},send:function(){var j,k,i,l=this.owner,h=this.options,d=this._initAjax(),n=l._blob,m=h.server;h.sendAsBinary?(m+=h.attachInfoToQuery!==!1?(/\?/.test(m)?'&':'?')+f.param(l._formData):'',k=n.getSource()):(j=new FormData(),f.each(l._formData,function(d,f){j.append(d,f)}),j.append(h.fileVal,n.getSource(),h.filename||l._formData.name||'')),h.withCredentials&&'withCredentials' in d?(d.open(h.method,m,!0),d.withCredentials=!0):d.open(h.method,m),this._setRequestHeader(d,h.headers),k?(d.overrideMimeType&&d.overrideMimeType('application/octet-stream'),e.os.android?(i=new FileReader(),i.onload=function(){d.send(this.result),i=i.onload=null},i.readAsArrayBuffer(k)):d.send(k)):d.send(j)},getResponse:function(){return this._response},getResponseAsJson:function(){return this._parseJson(this._response)},getResponseHeaders:function(){return this._headers},getStatus:function(){return this._status},abort:function(){var f=this._xhr;f&&(f.upload.onprogress=d,f.onreadystatechange=d,f.abort(),this._xhr=f=null)},destroy:function(){this.abort()},_parseHeader:function(d){var f={};return d&&d.replace(/^([^\:]+):(.*)$/gm,function(j,h,i){f[h.trim()]=i.trim()}),f},_initAjax:function(){var h=this,f=new XMLHttpRequest(),i=this.options;return !i.withCredentials||'withCredentials' in f||'undefined'==typeof XDomainRequest||(f=new XDomainRequest()),f.upload.onprogress=function(d){var f=0;return d.lengthComputable&&(f=d.loaded/d.total),h.trigger('progress',f)},f.onreadystatechange=function(){return 4===f.readyState?(f.upload.onprogress=d,f.onreadystatechange=d,h._xhr=null,h._status=f.status,f.status>=200&&f.status<300?(h._response=f.responseText,h._headers=h._parseHeader(f.getAllResponseHeaders()),h.trigger('load')):f.status>=500&&f.status<600?(h._response=f.responseText,h._headers=h._parseHeader(f.getAllResponseHeaders()),h.trigger('error','server-'+f.status)):h.trigger('error',h._status?'http-'+f.status:'abort')):void 0},h._xhr=f,f},_setRequestHeader:function(d,h){f.each(h,function(f,i){d.setRequestHeader(f,i)})},_parseJson:function(f){var d;try{d=JSON.parse(f)}catch(h){d={}}return d}})}),a('runtime/html5/md5',['runtime/html5/runtime'],function(q){var j=function(d,e){return 4.294967295E9&d+e},l=function(f,d,g,h,e,i){return d=j(j(d,f),j(h,i)),j(d<<e|d>>>32-e,g)},e=function(e,d,f,g,h,i,j){return l(d&f|~d&g,e,d,h,i,j)},f=function(f,d,g,e,h,i,j){return l(d&e|g&~e,f,d,h,i,j)},g=function(e,d,f,g,h,i,j){return l(d^f^g,e,d,h,i,j)},h=function(e,d,f,g,h,i,j){return l(f^(d|~g),e,d,h,i,j)},i=function(n,m){var d=n[0],i=n[1],k=n[2],l=n[3];d=e(d,i,k,l,m[0],7,-680876936),l=e(l,d,i,k,m[1],12,-389564586),k=e(k,l,d,i,m[2],17,606105819),i=e(i,k,l,d,m[3],22,-1044525330),d=e(d,i,k,l,m[4],7,-176418897),l=e(l,d,i,k,m[5],12,1200080426),k=e(k,l,d,i,m[6],17,-1473231341),i=e(i,k,l,d,m[7],22,-45705983),d=e(d,i,k,l,m[8],7,1770035416),l=e(l,d,i,k,m[9],12,-1958414417),k=e(k,l,d,i,m[10],17,-42063),i=e(i,k,l,d,m[11],22,-1990404162),d=e(d,i,k,l,m[12],7,1804603682),l=e(l,d,i,k,m[13],12,-40341101),k=e(k,l,d,i,m[14],17,-1502002290),i=e(i,k,l,d,m[15],22,1236535329),d=f(d,i,k,l,m[1],5,-165796510),l=f(l,d,i,k,m[6],9,-1069501632),k=f(k,l,d,i,m[11],14,643717713),i=f(i,k,l,d,m[0],20,-373897302),d=f(d,i,k,l,m[5],5,-701558691),l=f(l,d,i,k,m[10],9,38016083),k=f(k,l,d,i,m[15],14,-660478335),i=f(i,k,l,d,m[4],20,-405537848),d=f(d,i,k,l,m[9],5,568446438),l=f(l,d,i,k,m[14],9,-1019803690),k=f(k,l,d,i,m[3],14,-187363961),i=f(i,k,l,d,m[8],20,1163531501),d=f(d,i,k,l,m[13],5,-1444681467),l=f(l,d,i,k,m[2],9,-51403784),k=f(k,l,d,i,m[7],14,1735328473),i=f(i,k,l,d,m[12],20,-1926607734),d=g(d,i,k,l,m[5],4,-378558),l=g(l,d,i,k,m[8],11,-2022574463),k=g(k,l,d,i,m[11],16,1839030562),i=g(i,k,l,d,m[14],23,-35309556),d=g(d,i,k,l,m[1],4,-1530992060),l=g(l,d,i,k,m[4],11,1272893353),k=g(k,l,d,i,m[7],16,-155497632),i=g(i,k,l,d,m[10],23,-1094730640),d=g(d,i,k,l,m[13],4,681279174),l=g(l,d,i,k,m[0],11,-358537222),k=g(k,l,d,i,m[3],16,-722521979),i=g(i,k,l,d,m[6],23,76029189),d=g(d,i,k,l,m[9],4,-640364487),l=g(l,d,i,k,m[12],11,-421815835),k=g(k,l,d,i,m[15],16,530742520),i=g(i,k,l,d,m[2],23,-995338651),d=h(d,i,k,l,m[0],6,-198630844),l=h(l,d,i,k,m[7],10,1126891415),k=h(k,l,d,i,m[14],15,-1416354905),i=h(i,k,l,d,m[5],21,-57434055),d=h(d,i,k,l,m[12],6,1700485571),l=h(l,d,i,k,m[3],10,-1894986606),k=h(k,l,d,i,m[10],15,-1051523),i=h(i,k,l,d,m[1],21,-2054922799),d=h(d,i,k,l,m[8],6,1873313359),l=h(l,d,i,k,m[15],10,-30611744),k=h(k,l,d,i,m[6],15,-1560198380),i=h(i,k,l,d,m[13],21,1309151649),d=h(d,i,k,l,m[4],6,-145523070),l=h(l,d,i,k,m[11],10,-1120210379),k=h(k,l,d,i,m[2],15,718787259),i=h(i,k,l,d,m[9],21,-343485551),n[0]=j(d,n[0]),n[1]=j(i,n[1]),n[2]=j(k,n[2]),n[3]=j(l,n[3])},n=function(e){var d,f=[];for(d=0;64>d;d+=4){f[d>>2]=e.charCodeAt(d)+(e.charCodeAt(d+1)<<8)+(e.charCodeAt(d+2)<<16)+(e.charCodeAt(d+3)<<24)}return f},o=function(e){var d,f=[];for(d=0;64>d;d+=4){f[d>>2]=e[d]+(e[d+1]<<8)+(e[d+2]<<16)+(e[d+3]<<24)}return f},m=function(f){var d,j,e,g,k,l,m=f.length,h=[1732584193,-271733879,-1732584194,271733878];for(d=64;m>=d;d+=64){i(h,n(f.substring(d-64,d)))}for(f=f.substring(d-64),j=f.length,e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],d=0;j>d;d+=1){e[d>>2]|=f.charCodeAt(d)<<(d%4<<3)}if(e[d>>2]|=128<<(d%4<<3),d>55){for(i(h,e),d=0;16>d;d+=1){e[d]=0}}return g=8*m,g=g.toString(16).match(/(.*?)(.{0,8})$/),k=parseInt(g[2],16),l=parseInt(g[1],16)||0,e[14]=k,e[15]=l,i(h,e),h},r=function(f){var d,k,e,g,l,m,j=f.length,h=[1732584193,-271733879,-1732584194,271733878];for(d=64;j>=d;d+=64){i(h,o(f.subarray(d-64,d)))}for(f=j>d-64?f.subarray(d-64):new Uint8Array(0),k=f.length,e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],d=0;k>d;d+=1){e[d>>2]|=f[d]<<(d%4<<3)}if(e[d>>2]|=128<<(d%4<<3),d>55){for(i(h,e),d=0;16>d;d+=1){e[d]=0}}return g=8*j,g=g.toString(16).match(/(.*?)(.{0,8})$/),l=parseInt(g[2],16),m=parseInt(g[1],16)||0,e[14]=l,e[15]=m,i(h,e),h},p=['0','1','2','3','4','5','6','7','8','9','a','b','c','d','e','f'],s=function(e){var d,f='';for(d=0;4>d;d+=1){f+=p[15&e>>8*d+4]+p[15&e>>8*d]}return f},k=function(e){var d;for(d=0;d<e.length;d+=1){e[d]=s(e[d])}return e.join('')},t=function(d){return k(m(d))},d=function(){this.reset()};return '5d41402abc4b2a76b9719d911017c592'!==t('hello')&&(j=function(d,e){var f=(65535&d)+(65535&e),g=(d>>16)+(e>>16)+(f>>16);return g<<16|65535&f}),d.prototype.append=function(d){return /[\u0080-\uFFFF]/.test(d)&&(d=unescape(encodeURIComponent(d))),this.appendBinary(d),this},d.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var d,f=this._buff.length;for(d=64;f>=d;d+=64){i(this._state,n(this._buff.substring(d-64,d)))}return this._buff=this._buff.substr(d-64),this},d.prototype.end=function(i){var d,e,f=this._buff,g=f.length,h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(d=0;g>d;d+=1){h[d>>2]|=f.charCodeAt(d)<<(d%4<<3)}return this._finish(h,g),e=i?this._state:k(this._state),this.reset(),e},d.prototype._finish=function(e,j){var f,g,h,d=j;if(e[d>>2]|=128<<(d%4<<3),d>55){for(i(this._state,e),d=0;16>d;d+=1){e[d]=0}}f=8*this._length,f=f.toString(16).match(/(.*?)(.{0,8})$/),g=parseInt(f[2],16),h=parseInt(f[1],16)||0,e[14]=g,e[15]=h,i(this._state,e)},d.prototype.reset=function(){return this._buff='',this._length=0,this._state=[1732584193,-271733879,-1732584194,271733878],this},d.prototype.destroy=function(){delete this._state,delete this._buff,delete this._length},d.hash=function(d,f){/[\u0080-\uFFFF]/.test(d)&&(d=unescape(encodeURIComponent(d)));var e=m(d);return f?e:k(e)},d.hashBinary=function(e,f){var d=m(e);return f?d:k(d)},d.ArrayBuffer=function(){this.reset()},d.ArrayBuffer.prototype.append=function(f){var d,e=this._concatArrayBuffer(this._buff,f),g=e.length;for(this._length+=f.byteLength,d=64;g>=d;d+=64){i(this._state,o(e.subarray(d-64,d)))}return this._buff=g>d-64?e.subarray(d-64):new Uint8Array(0),this},d.ArrayBuffer.prototype.end=function(i){var d,e,f=this._buff,g=f.length,h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(d=0;g>d;d+=1){h[d>>2]|=f[d]<<(d%4<<3)}return this._finish(h,g),e=i?this._state:k(this._state),this.reset(),e},d.ArrayBuffer.prototype._finish=d.prototype._finish,d.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._state=[1732584193,-271733879,-1732584194,271733878],this},d.ArrayBuffer.prototype.destroy=d.prototype.destroy,d.ArrayBuffer.prototype._concatArrayBuffer=function(e,f){var g=e.length,d=new Uint8Array(g+f.byteLength);return d.set(e),d.set(new Uint8Array(f),g),d},d.ArrayBuffer.hash=function(e,f){var d=r(new Uint8Array(e));return f?d:k(d)},q.register('Md5',{init:function(){},loadFromBlob:function(h){var g,f,e=h.getSource(),i=2097152,m=Math.ceil(e.size/i),l=0,j=this.owner,k=new d.ArrayBuffer(),n=this,o=e.mozSlice||e.webkitSlice||e.slice;f=new FileReader(),g=function(){var d,p;d=l*i,p=Math.min(d+i,e.size),f.onload=function(d){k.append(d.target.result),j.trigger('progress',{total:h.size,loaded:p})},f.onloadend=function(){f.onloadend=f.onload=null,++l<m?setTimeout(g,1):setTimeout(function(){j.trigger('load'),n.result=k.end(),g=h=e=k=null,j.trigger('complete')},50)},f.readAsArrayBuffer(o.call(e,d,p))},g()},getResult:function(){return this.result}})}),a('runtime/flash/runtime',['base','runtime/runtime','runtime/compbase'],function(d,g,k){function e(){var e;try{e=navigator.plugins['Shockwave Flash'],e=e.description}catch(l){try{e=(new ActiveXObject('ShockwaveFlash.ShockwaveFlash')).GetVariable('$version')}catch(m){e='0.0'}}return e=e.match(/\d+/g),parseFloat(e[0]+'.'+e[1],10)}function f(){function d(j,m){var l,f,h=j.type||j;l=h.split('::'),f=l[0],h=l[1],'Ready'===h&&f===e.uid?e.trigger('ready'):i[f]&&i[f].trigger(h.toLowerCase(),j,m)}var f={},i={},l=this.destroy,e=this,m=d.guid('webuploader_');g.apply(e,arguments),e.type=j,e.exec=function(n,o){var j,l=this,m=l.uid,p=d.slice(arguments,2);return i[m]=l,h[n]&&(f[m]||(f[m]=new h[n](l,e)),j=f[m],j[o])?j[o].apply(j,p):e.flashExec.apply(l,arguments)},b[m]=function(){var e=arguments;setTimeout(function(){d.apply(null,e)},1)},this.jsreciver=m,this.destroy=function(){return l&&l.apply(this,arguments)},this.flashExec=function(f,h){var i=e.getFlash(),j=d.slice(arguments,2);return i.exec(this.uid,f,h,j)}}var i=d.$,j='flash',h={};return d.inherits(g,{constructor:f,init:function(){var e,f=this.getContainer(),h=this.options;f.css({position:'absolute',top:'-8px',left:'-8px',width:'9px',height:'9px',overflow:'hidden'}),e='<object id="'+this.uid+'" type="application/'+'x-shockwave-flash" data="'+h.swf+'" ',d.browser.ie&&(e+='classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" '),e+='width="100%" height="100%" style="outline:0"><param name="movie" value="'+h.swf+'" />'+'<param name="flashvars" value="uid='+this.uid+'&jsreciver='+this.jsreciver+'" />'+'<param name="wmode" value="transparent" />'+'<param name="allowscriptaccess" value="always" />'+'</object>',f.html(e)},getFlash:function(){return this._flash?this._flash:(this._flash=i('#'+this.uid).get(0),this._flash)}}),f.register=function(f,e){return e=h[f]=d.inherits(k,i.extend({flashExec:function(){var h=this.owner,i=this.getRuntime();return i.flashExec.apply(h,arguments)}},e))},e()>=11.4&&g.addRuntime(j,f),f}),a('runtime/flash/filepicker',['base','runtime/flash/runtime'],function(d,e){var f=d.$;return e.register('FilePicker',{init:function(j){var i,h,g=f.extend({},j);for(i=g.accept&&g.accept.length,h=0;i>h;h++){g.accept[h].title||(g.accept[h].title='Files')}delete g.button,delete g.id,delete g.container,this.flashExec('FilePicker','init',g)},destroy:function(){this.flashExec('FilePicker','destroy')}})}),a('runtime/flash/image',['runtime/flash/runtime'],function(d){return d.register('Image',{loadFromBlob:function(f){var e=this.owner;e.info()&&this.flashExec('Image','info',e.info()),e.meta()&&this.flashExec('Image','meta',e.meta()),this.flashExec('Image','loadFromBlob',f.uid)}})}),a('runtime/flash/transport',['base','runtime/flash/runtime','runtime/client'],function(e,f,g){var d=e.$;return f.register('Transport',{init:function(){this._status=0,this._response=null,this._responseJson=null},send:function(){var m,j=this.owner,h=this.options,i=this._initAjax(),k=j._blob,l=h.server;i.connectRuntime(k.ruid),h.sendAsBinary?(l+=(/\?/.test(l)?'&':'?')+d.param(j._formData),m=k.uid):(d.each(j._formData,function(d,h){i.exec('append',d,h)}),i.exec('appendBlob',h.fileVal,k.uid,h.filename||j._formData.name||'')),this._setRequestHeader(i,h.headers),i.exec('send',{method:h.method,url:l,forceURLStream:h.forceURLStream,mimeType:'application/octet-stream'},m)},getStatus:function(){return this._status},getResponse:function(){return this._response||''},getResponseAsJson:function(){return this._responseJson},getResponseHeaders:function(){return {}},abort:function(){var d=this._xhr;d&&(d.exec('abort'),d.destroy(),this._xhr=d=null)},destroy:function(){this.abort()},_initAjax:function(){var d=this,h=new g('XMLHttpRequest');return h.on('uploadprogress progress',function(i){var h=i.loaded/i.total;return h=Math.min(1,Math.max(0,h)),d.trigger('progress',h)}),h.on('load',function(){var l,i=h.exec('getStatus'),k=!1,j='';return h.off(),d._xhr=null,i>=200&&300>i?k=!0:i>=500&&600>i?(k=!0,j='server-'+i):j='http-'+i,k&&(d._response=h.exec('getResponse'),d._response=decodeURIComponent(d._response),l=function(d){try{return b.JSON&&b.JSON.parse?JSON.parse(d):(new Function('return '+d)).call()}catch(m){return {}}},d._responseJson=d._response?l(d._response):{}),h.destroy(),h=null,j?d.trigger('error',j):d.trigger('load')}),h.on('error',function(){var i=h.exec('getStatus'),j=i?'http-'+i:'http';h.off(),d._xhr=null,d.trigger('error',j)}),d._xhr=h,h},_setRequestHeader:function(h,i){d.each(i,function(d,j){h.exec('setRequestHeader',d,j)})}})}),a('runtime/flash/blob',['runtime/flash/runtime','lib/blob'],function(d,e){return d.register('Blob',{slice:function(f,g){var h=this.flashExec('Blob','slice',f,g);return new e(this.getRuid(),h)}})}),a('runtime/flash/md5',['runtime/flash/runtime'],function(d){return d.register('Md5',{init:function(){},loadFromBlob:function(e){return this.flashExec('Md5','loadFromBlob',e.uid)}})}),a('preset/all',['base','widgets/filednd','widgets/filepaste','widgets/filepicker','widgets/image','widgets/queue','widgets/runtime','widgets/upload','widgets/validator','widgets/md5','runtime/html5/blob','runtime/html5/dnd','runtime/html5/filepaste','runtime/html5/filepicker','runtime/html5/imagemeta/exif','runtime/html5/androidpatch','runtime/html5/image','runtime/html5/transport','runtime/html5/md5','runtime/flash/filepicker','runtime/flash/image','runtime/flash/transport','runtime/flash/blob','runtime/flash/md5'],function(d){return d}),a('widgets/log',['base','uploader','widgets/widget'],function(g,h){function c(d){var j=f.extend({},e,d),k=i.replace(/^(.*)\?/,'$1'+f.param(j)),l=new Image();l.src=k}var e,f=g.$,i=' http://static.tieba.baidu.com/tb/pms/img/st.gif??',d=(location.hostname||location.host||'protected').toLowerCase(),j=d&&/baidu/i.exec(d);if(j){return e={dv:3,master:'webuploader',online:/test/.exec(d)?0:1,module:'',product:d,type:0},h.register({name:'log',init:function(){var f=this.owner,d=0,e=0;f.on('error',function(d){c({type:2,c_error_code:d})}).on('uploadError',function(e,d){c({type:2,c_error_code:'UPLOAD_ERROR',c_reason:''+d})}).on('uploadComplete',function(f){d++,e+=f.size}).on('uploadFinished',function(){c({c_count:d,c_size:e}),d=e=0}),c({c_usage:1})}})}}),a('webuploader',['preset/all','widgets/log'],function(d){return d}),c('webuploader')});